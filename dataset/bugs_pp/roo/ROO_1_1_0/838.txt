roo components activated deactivated multiple times
debugging issue custom implementation commandmarker command marker noticed strange looked fine register custom type converter activate componentcontext component context context staticfieldconverter field converter add channeltype channel type adding working debugging noticed called repeatedly infinitely exception thrown add staticfieldconverter field converter exception component registered started existing commandmarkers command markers existing add ons noticed deactivate type converters removed converter map basic undo operation started work deactivate componentcontext component context context staticfieldconverter field converter remove channeltype channel type time debug mode looked noticed strange commandmarker command marker registered osgi service service serviceevent service event processed servicelistener service listener call getclassname triggers activate actual service object adds converter map execute mycontext context ungetservice unget service issue check osgi serviceevent service event servicereference service reference unregistering event servicereference service reference users dealing stale reference clean mycontext context ungetservice unget service executed releasing service object references held servicereference service reference time service required instance service object servicereference service reference created staticfieldconverter field converter service alive time holds reference commandmarker command marker registered instance commandmarker command marker service created triggers execution activate attempts add instance commandmarker command marker map based code staticfieldconverter field converter invocation exception guess felix attempts retry activate calls infinitely explains adding deactivate solves hides problem missing fundamental roo design adding deactivate simply undo activate hides problem depending scenario underlying services created activated deactivated multiple times times extra code unnecessary instances simple job didn profile feel bit faster removed code springframework roo startlevel activator mycontext context ungetservice unget service