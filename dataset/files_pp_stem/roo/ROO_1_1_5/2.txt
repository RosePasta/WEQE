springframework roo addon backup bufferedinputstream buffer input stream file fileinputstream file input stream filenotfoundexcept file except filenamefilt filenam filter ioexcept except inputstream input stream text dateformat format text simpledateformat simpl format util util log logger util zip zipentri zip entri util zip zipoutputstream zip output stream felix scr annot compon felix scr annot refer felix scr annot servic springframework roo file monitor event filedetail file detail springframework roo process manag filemanag file manag springframework roo process manag mutablefil mutabl file springframework roo project path springframework roo project projectoper project oper springframework roo support log handlerutil handler util springframework roo support util oper backup add author stefan schmidt author ben alex author alan stewart compon servic backupoperationsimpl backup oper impl backupoper backup oper logger logger handlerutil handler util getlogg logger backupoperationsimpl backup oper impl refer filemanag file manag filemanag file manag refer projectoper project oper projectoper project oper isbackupavail backup projectoper project oper isprojectavail project backup istru isbackupavail backup project metadata unavail dateformat format simpledateformat simpl format yyyi file separatorchar separ window format legal form filenam roo simpledateformat simpl format yyyi start system nanotim nano time zipoutputstream zip output stream zo file projectdirectori project directori file projectoper project oper getpathresolv path resolv getidentifi identifi path root mutablefil mutabl file file filemanag file manag createfil creat file filedetail file detail getcanonicalpath canon path file projectdirectori project directori projectoper project oper getprojectmetadata project metadata getprojectnam project format zip zo zipoutputstream zip output stream file getoutputstream output stream zip projectdirectori project directori projectdirectori project directori zo filenotfoundexcept file except logger fine determin project directori ioexcept except logger fine creat backup archiv zo zo close ioexcept except millisecond system nanotim nano time start backup complet millisecond zip file directori file base zipoutputstream zip output stream zo ioexcept except file file directori listfil list file filenamefilt filenam filter accept file dir don directori target base dir equal base equal target skip exist backup file dir equal base endswith end zip skip file start startswith start buffer read file length file isdirectori directori file listfil list file length zipentri zip entri direntri dir entri zipentri zip entri file getpath path substr base getpath path length system getproperti properti file separ zo putnextentri entri direntri dir entri zip file base zo inputstream input stream bufferedinputstream buffer input stream fileinputstream file input stream file zipentri zip entri entri zipentri zip entri file getpath path substr base getpath path length zo putnextentri entri entri read read buffer zo write buffer read close 