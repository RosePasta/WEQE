springframework roo project common ioutil util separ junit assertequ equal junit assertnul mockito matcher mockito matcher mockito mockito mock mockito mockito verifi mockito mockito bytearrayinputstream arrai input stream util arrai util collect junit junit test mockito mock mockito mockitoannot mockito annot springframework roo metadata metadataservic metadata servic springframework roo process manag filemanag file manag springframework roo project maven pom unit test link mavenoperationsimpl maven oper impl author andrew swan mavenoperationsimpltest maven oper impl test artifact foo lib classifi ex group version pom depend remov xml version encod utf standalon project depend depend groupid group groupid group artifactid artifact test lib artifactid artifact version version scope test scope depend depend project pom depend remov project depend depend groupid group group groupid group artifactid artifact artifact artifactid artifact version version version scope scope classifi classifi classifi depend depend groupid group groupid group artifactid artifact test lib artifactid artifact version version scope test scope depend depend project pom path path simpl descript foo librari mock filemanag file manag mockfilemanag mock file manag mock metadataservic metadata servic mockmetadataservic mock metadata servic mock pathresolv path resolv mockpathresolv mock path resolv mock pommanagementservic pom manag servic mockpommanagementservic mock pom manag servic mock projectmetadata project metadata mockprojectmetadata mock project metadata fixtur mavenoperationsimpl maven oper impl projectoper project oper assertmodulefocusallow modul focu allow expectedresult expect result modulenam modul name set mockpommanagementservic mock pom manag servic getmodulenam modul name thenreturn arrai aslist list modulenam modul name invok check assertequ equal expectedresult expect result projectoper project oper ismodulefocusallow modul focu allow setup set mock mockitoannot mockito annot initmock init mock mockpathresolv mock path resolv getidentifi identifi path root getmodulepathid modul path mavenprojectmetadataprovid maven project metadata provid pom rel path thenreturn pom path object test projectoper project oper mavenoperationsimpl maven oper impl projectoper project oper filemanag file manag mockfilemanag mock file manag projectoper project oper metadataservic metadata servic mockmetadataservic mock metadata servic projectoper project oper pathresolv path resolv mockpathresolv mock path resolv projectoper project oper pommanagementservic pom manag servic mockpommanagementservic mock pom manag servic test testcannotfocusmodulewhenmorethanonemoduleexist test focu modul modul exist assertmodulefocusallow modul focu allow core test testcannotfocusmodulewhenoneorlessmodulesexist test focu modul modul exist assertmodulefocusallow modul focu allow test testgetfocusedmodulewhenchildmodulehasfocu test focus modul child modul focu set mockpommanagementservic mock pom manag servic getfocusedmodulenam focus modul thenreturn child pom mockchildpom mock child pom mock pom projectmetadata project metadata mockchildmetadata mock child metadata mock projectmetadata project metadata mockchildmetadata mock child metadata getpom pom thenreturn mockchildpom mock child pom mockmetadataservic mock metadata servic projectmetadata project metadata getprojectidentifi project identifi child thenreturn mockchildmetadata mock child metadata invok check assertequ equal mockchildpom mock child pom projectoper project oper getfocusedmodul focus modul test testgetfocusedmodulewhennomodulesexist test focus modul modul exist set mockpommanagementservic mock pom manag servic getfocusedmodulenam focus modul thenreturn mockmetadataservic mock metadata servic projectmetadata project metadata getprojectidentifi project identifi thenreturn invok check assertnul projectoper project oper getfocusedmodul focus modul test testremovedependencytwicewhenitexistsonc test remov depend exist set mockfilemanag mock file manag getinputstream input stream pom path thenreturn bytearrayinputstream arrai input stream pom depend remov getbyt byte depend remov depend mockdepend mock depend mock depend mockdepend mock depend getartifactid artifact thenreturn artifact mockdepend mock depend getclassifi classifi thenreturn classifi mockdepend mock depend getgroupid group thenreturn group mockdepend mock depend getsimpledescript simpl descript thenreturn simpl descript mockdepend mock depend gettyp type thenreturn dependencytyp depend type jar mockdepend mock depend getvers version thenreturn version mockmetadataservic mock metadata servic projectmetadata project metadata getprojectidentifi project identifi thenreturn mockprojectmetadata mock project metadata pom pom mock pom pom getpath path thenreturn pom path mockprojectmetadata mock project metadata getpom pom thenreturn pom collect depend depend arrai aslist list mockdepend mock depend mockdepend mock depend pom isanydependenciesregist depend regist depend thenreturn pom isdependencyregist depend regist mockdepend mock depend thenreturn invok projectoper project oper removedepend remov depend depend check expectedpom expect pom pom depend remov replac separ verifi mockfilemanag mock file manag createorupdatetextfileifrequir creat updat text file requir pom path expectedpom expect pom 