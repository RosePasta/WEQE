springframework roo shell jline printwrit print writer stringwrit writer util log formatt util log handler util log level util log logrecord log record jline ansibuff ansi buffer jline consoleread consol reader springframework roo shell shellpromptaccessor shell prompt accessor springframework roo support util jdk log link handler emit log messag jline link consoleread consol reader author ben alex jlineloghandl log handler handler window system getproperti properti tolowercas window bright color getboolean roo bright consoleread consol reader reader shellpromptaccessor shell prompt accessor shellpromptaccessor shell prompt accessor threadloc thread local redrawprohibit redraw prohibit threadloc thread local lastmessag messag includethreadnam includ thread ansisupport ansi support jlineloghandl log handler consoleread consol reader reader shellpromptaccessor shell prompt accessor shellpromptaccessor shell prompt accessor notnul reader consol reader requir notnul shellpromptaccessor shell prompt accessor shell prompt accessor requir reader reader shellpromptaccessor shell prompt accessor shellpromptaccessor shell prompt accessor ansisupport ansi support reader gettermin termin isansisupport ansi support setformatt set formatt formatt format logrecord log record record stringbuff buffer stringbuff buffer record getmessag messag append record getmessag messag append system getproperti properti separ record getthrown thrown stringwrit writer stringwrit writer printwrit print writer printwrit print writer record getthrown thrown printstacktrac print stack trace close append tostr except tostr overrid flush overrid close securityexcept secur except prohibitredraw prohibit redraw redrawprohibit redraw prohibit set cancelredrawprohibit cancel redraw prohibit redrawprohibit redraw prohibit remov setincludethreadnam set includ thread includ includethreadnam includ thread includ resetmessagetrack reset messag track lastmessag messag roo overrid publish logrecord log record record avoid repeat messag displai current messag roo todisplai displai todisplai displai record todisplai displai equal lastmessag messag lastmessag messag todisplai displai stringbuff buffer buffer reader getcursorbuff cursor buffer getbuff buffer cursor reader getcursorbuff cursor buffer cursor reader getcursorbuff cursor buffer length user semi type debug messag separ reader printnewlin print newlin cancel type reset appear empti reader getcursorbuff cursor buffer setbuff set buffer stringbuff buffer reader getcursorbuff cursor buffer cursor ensur displai redraw reader setdefaultprompt set prompt reader redrawlin redraw restor format set origin reader setdefaultprompt set prompt shellpromptaccessor shell prompt accessor getshellprompt shell prompt reader getcursorbuff cursor buffer setbuff set buffer buffer reader getcursorbuff cursor buffer cursor cursor reader printstr print todisplai displai prohibitingredraw prohibit redraw redrawprohibit redraw prohibit prohibitingredraw prohibit redraw reader redrawlin redraw reader flushconsol flush consol except reporterror report error publish log messag level sever intvalu todisplai displai logrecord log record event stringbuild builder stringbuild builder threadnam thread eventstr event includethreadnam includ thread equal thread currentthread current thread getnam threadnam thread thread currentthread current thread getnam build event indent nice left hand side thread stringbuild builder lineseparatorandindentingstr separ indent stringbuild builder threadnam thread length lineseparatorandindentingstr separ indent append eventstr event getformatt formatt format event replac system getproperti properti separ system getproperti properti separ lineseparatorandindentingstr separ indent tostr eventstr event endswith end lineseparatorandindentingstr separ indent tostr eventstr event eventstr event substr eventstr event length lineseparatorandindentingstr separ indent length threadnam thread eventstr event getformatt formatt format event ansisupport ansi support event getlevel level intvalu level sever intvalu append getansibuff ansi buffer revers threadnam thread red eventstr event event getlevel level intvalu level warn intvalu append getansibuff ansi buffer revers threadnam thread magenta eventstr event event getlevel level intvalu level info intvalu append getansibuff ansi buffer revers threadnam thread green eventstr event append getansibuff ansi buffer revers threadnam thread append eventstr event append threadnam thread append eventstr event tostr text brighter request system properti roo bright work issu window revers combin jansi lib leav neg flag set reset explicitli patch ansibuff ansi buffer ansibuff ansi buffer getansibuff ansi buffer esc ansibuff ansi buffer ansibuff ansi buffer revers str window revers str append ansicod ansi code attrib esc revers str ansibuff ansi buffer attrib str code bright color code code color code add bright code append esc code append str append ansicod ansi code attrib attrib str code 