springframework roo addon backup file fileinputstream file input stream filenotfoundexcept file except filenamefilt filenam filter ioexcept except text dateformat format text simpledateformat simpl format util util log logger util zip zipentri zip entri util zip zipoutputstream zip output stream felix scr annot compon felix scr annot refer felix scr annot servic springframework roo file monitor event filedetail file detail springframework roo metadata metadataservic metadata servic springframework roo process manag filemanag file manag springframework roo process manag mutablefil mutabl file springframework roo project path springframework roo project pathresolv path resolv springframework roo project projectmetadata project metadata springframework roo support log handlerutil handler util springframework roo support util oper backup add author stefan schmidt author ben alex author alan stewart compon servic backupoperationsimpl backup oper impl backupoper backup oper logger logger handlerutil handler util getlogg logger backupoperationsimpl backup oper impl refer metadataservic metadata servic metadataservic metadata servic refer filemanag file manag filemanag file manag isbackupavail backup getpathresolv path resolv backup projectmetadata project metadata projectmetadata project metadata projectmetadata project metadata metadataservic metadata servic projectmetadata project metadata getprojectidentifi project identifi notnul projectmetadata project metadata unabl project metadata dateformat format simpledateformat simpl format yyyi file separatorchar separ window format legal form filenam roo simpledateformat simpl format yyyi start system nanotim nano time file projectdirectori project directori file getpathresolv path resolv getidentifi identifi path root mutablefil mutabl file file filemanag file manag createfil creat file filedetail file detail getcanonicalpath canon path file projectdirectori project directori projectmetadata project metadata getprojectnam project format zip zipoutputstream zip output stream zo zipoutputstream zip output stream file getoutputstream output stream zip projectdirectori project directori projectdirectori project directori zo zo close filenotfoundexcept file except logger fine determin project directori ioexcept except logger fine creat backup archiv millisecond system nanotim nano time start backup complet millisecond zip file directori file base zipoutputstream zip output stream zo ioexcept except file file directori listfil list file filenamefilt filenam filter accept file dir don directori target base dir equal base equal target skip exist backup file dir equal base endswith end zip includ dbre xml dir equal base equal roo dbre skip file start startswith start buffer read file length file isdirectori directori file listfil list file length zipentri zip entri direntri dir entri zipentri zip entri file getpath path substr base getpath path length system getproperti properti file separ zo putnextentri entri direntri dir entri zip file base zo fileinputstream file input stream fileinputstream file input stream file zipentri zip entri entri zipentri zip entri file getpath path substr base getpath path length zo putnextentri entri entri read read buffer zo write buffer read close pathresolv path resolv getpathresolv path resolv projectmetadata project metadata projectmetadata project metadata projectmetadata project metadata metadataservic metadata servic projectmetadata project metadata getprojectidentifi project identifi projectmetadata project metadata projectmetadata project metadata getpathresolv path resolv 