springframework roo project junit assertequ equal junit assertnotnul junit asserttru mockito matcher mockito matcher mockito mockito mock mockito mockito verifi mockito mockito file ioexcept except net url util arrai util collect junit framework assertionfailederror assert fail error junit junit test mockito mock mockito mockitoannot mockito annot osgi framework bundlecontext bundl context osgi servic compon componentcontext compon context springframework roo file monitor filemonitorservic file monitor servic springframework roo metadata metadatadependencyregistri metadata depend registri springframework roo metadata metadataservic metadata servic springframework roo process manag filemanag file manag springframework roo project maven pom springframework roo project maven pomfactori pom factori springframework roo shell shell springframework roo support osgi osgiutil util springframework roo support util fileutil file util dom element unit test link pommanagementserviceimpl pom manag servic impl author andrew swan pommanagementserviceimpltest pom manag servic impl test root modul mock filemanag file manag mockfilemanag mock file manag mock filemonitorservic file monitor servic mockfilemonitorservic mock file monitor servic mock metadatadependencyregistri metadata depend registri mockmetadatadependencyregistri mock metadata depend registri mock metadataservic metadata servic mockmetadataservic mock metadata servic mock pomfactori pom factori mockpomfactori mock pom factori mock shell mockshel mock shell fixtur pommanagementserviceimpl pom manag servic impl servic getcanonicalpath canon path relativepath rel path systemdependentpath system depend path relativepath rel path replac file separ url resourc getclass getresourc resourc systemdependentpath system depend path assertnotnul can find systemdependentpath system depend path classpath getclass getnam resourc file resourc touri uri getcanonicalpath canon path except assertionfailederror assert fail error getmessag messag pom getmockpom mock pom modulenam modul canonicalpath canon path pom mockpom mock pom mock pom mockpom mock pom getmodulenam modul thenreturn modulenam modul mockpom mock pom getpath path thenreturn canonicalpath canon path mockpomfactori mock pom factori getinst instanc element canonicalpath canon path modulenam modul thenreturn mockpom mock pom mockpom mock pom setup set mockitoannot mockito annot initmock init mock servic pommanagementserviceimpl pom manag servic impl servic filemanag file manag mockfilemanag mock file manag servic filemonitorservic file monitor servic mockfilemonitorservic mock file monitor servic servic metadatadependencyregistri metadata depend registri mockmetadatadependencyregistri mock metadata depend registri servic metadataservic metadata servic mockmetadataservic mock metadata servic servic pomfactori pom factori mockpomfactori mock pom factori servic shell mockshel mock shell set work directori servic test relativepath rel path desir work directori rel project ioexcept except setupworkingdirectori set work directori relativepath rel path ioexcept except componentcontext compon context mockcomponentcontext mock compon context mock componentcontext compon context bundlecontext bundl context mockbundlecontext mock bundl context mock bundlecontext bundl context mockcomponentcontext mock compon context getbundlecontext bundl context thenreturn mockbundlecontext mock bundl context file workingdirectori work directori file target test class springframework roo project relativepath rel path mockbundlecontext mock bundl context getproperti properti osgiutil util roo work directori properti thenreturn workingdirectori work directori getcanonicalpath canon path servic activ mockcomponentcontext mock compon context test testgetpomofsinglemoduleprojectwhenparenthasnorelativepath test pom singl modul project parent rel path except set setupworkingdirectori set work directori singl canonicalpath canon path getcanonicalpath canon path singl pom xml mockfilemonitorservic mock file monitor servic getdirtyfil dirti file pommanagementserviceimpl pom manag servic impl getnam thenreturn arrai aslist list canonicalpath canon path pom mockpom mock pom getmockpom mock pom root modul canonicalpath canon path invok collect pom pom servic getpom pom check assertequ equal pom size assertequ equal mockpom mock pom pom iter verifyprojectmetadatanotif verifi project metadata notif root modul test testgetpomsofmultimoduleprojectwhenchildisdirti test pom multi modul project child dirti except set setupworkingdirectori set work directori multi rootpom root pom fileutil file util getsystemdependentpath system depend path multi pom xml rootpomcanonicalpath root pom canon path getcanonicalpath canon path rootpom root pom childpom child pom fileutil file util getsystemdependentpath system depend path multi foo child pom xml childpomcanonicalpath child pom canon path getcanonicalpath canon path childpom child pom collect dirtyfil dirti file arrai aslist list childpomcanonicalpath child pom canon path mockfilemonitorservic mock file monitor servic getdirtyfil dirti file pommanagementserviceimpl pom manag servic impl getnam thenreturn dirtyfil dirti file pom mockrootpom mock root pom getmockpom mock pom root modul rootpomcanonicalpath root pom canon path childmodulenam child modul foo child pom mockchildpom mock child pom getmockpom mock pom childmodulenam child modul childpomcanonicalpath child pom canon path mockfilemanag mock file manag getinputstream input stream rootpomcanonicalpath root pom canon path thenreturn getclass getresourceasstream resourc stream rootpom root pom mockfilemanag mock file manag getinputstream input stream childpomcanonicalpath child pom canon path thenreturn getclass getresourceasstream resourc stream childpom child pom servic addpom add pom mockrootpom mock root pom invok collect pom pom servic getpom pom check collect pom expectedpom expect pom arrai aslist list mockrootpom mock root pom mockchildpom mock child pom assertequ equal expectedpom expect pom size pom size asserttru pom containsal expectedpom expect pom verifyprojectmetadatanotif verifi project metadata notif childmodulenam child modul test testgetpomsofmultimoduleprojectwhenparentandchildaredirti test pom multi modul project parent child dirti except set setupworkingdirectori set work directori multi rootpom root pom multi pom xml rootpomcanonicalpath root pom canon path getcanonicalpath canon path rootpom root pom childpom child pom multi foo child pom xml childpomcanonicalpath child pom canon path getcanonicalpath canon path childpom child pom collect dirtyfil dirti file arrai aslist list rootpomcanonicalpath root pom canon path childpomcanonicalpath child pom canon path mockfilemonitorservic mock file monitor servic getdirtyfil dirti file pommanagementserviceimpl pom manag servic impl getnam thenreturn dirtyfil dirti file pom mockrootpom mock root pom getmockpom mock pom root modul rootpomcanonicalpath root pom canon path childmodulenam child modul foo child pom mockchildpom mock child pom getmockpom mock pom childmodulenam child modul childpomcanonicalpath child pom canon path mockfilemanag mock file manag getinputstream input stream rootpomcanonicalpath root pom canon path thenreturn getclass getresourceasstream resourc stream rootpom root pom mockfilemanag mock file manag getinputstream input stream childpomcanonicalpath child pom canon path thenreturn getclass getresourceasstream resourc stream childpom child pom invok collect pom pom servic getpom pom check collect pom expectedpom expect pom arrai aslist list mockrootpom mock root pom mockchildpom mock child pom assertequ equal expectedpom expect pom size pom size asserttru pom containsal expectedpom expect pom verifyprojectmetadatanotif verifi project metadata notif root modul childmodulenam child modul test testgetpomswhennopomsaredirti test pom pom dirti set collect dirtyfil dirti file arrai aslist list pom txt mockfilemonitorservic mock file monitor servic getdirtyfil dirti file pommanagementserviceimpl pom manag servic impl getnam thenreturn dirtyfil dirti file invok collect pom pom servic getpom pom check assertequ equal pom size test testgetpomswhenoneemptypomisdirti test pom empti pom dirti except set collect dirtyfil dirti file arrai aslist list getcanonicalpath canon path empti pom xml mockfilemonitorservic mock file monitor servic getdirtyfil dirti file pommanagementserviceimpl pom manag servic impl getnam thenreturn dirtyfil dirti file invok collect pom pom servic getpom pom check assertequ equal pom size test testgetpomswhenonenonexistantpomisdirti test pom exist pom dirti set collect dirtyfil dirti file arrai aslist list user jblogg clinic pom xml mockfilemonitorservic mock file monitor servic getdirtyfil dirti file pommanagementserviceimpl pom manag servic impl getnam thenreturn dirtyfil dirti file invok collect pom pom servic getpom pom check assertequ equal pom size verifyprojectmetadatanotif verifi project metadata notif modulenam modul name modulenam modul modulenam modul name projectmetadataid project metadata projectmetadata project metadata getprojectidentifi project identifi modulenam modul verifi mockmetadataservic mock metadata servic evictandget evict projectmetadataid project metadata verifi mockmetadatadependencyregistri mock metadata depend registri notifydownstream notifi downstream projectmetadataid project metadata 