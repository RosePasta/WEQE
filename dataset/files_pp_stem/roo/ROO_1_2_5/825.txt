springframework roo file monitor poll file ioexcept except util arraylist arrai list util collect util hashmap hash map util hashset hash set util iter util linkedhashset link hash set util list util map util map entri util set util sortedset sort set util treeset tree set util weakhashmap weak hash map common lang lang valid springframework roo file monitor directorymonitoringrequest directori monitor request springframework roo file monitor filemonitorservic file monitor servic springframework roo file monitor monitoringrequest monitor request springframework roo file monitor notifiablefilemonitorservic notifi file monitor servic springframework roo file monitor event filedetail file detail springframework roo file monitor event fileev file event springframework roo file monitor event fileeventlisten file event listen springframework roo file monitor event fileoper file oper springframework roo support util fileutil file util simpl poll base link filemonitorservic file monitor servic implement iter link monitoringrequest monitor request instanc build activ file time execut compar activ file time execut link monitoringrequest monitor request event fire event fire process complet link monitoringrequest monitor request examin implement recogn link fileoper file oper renam event implement ignor monitor file filenam start period hidden file link fileoper file oper delet event implement link fileev file event time equal time delet file modifi time repres delet time time delet detect author ben alex pollingfilemonitorservic poll file monitor servic notifiablefilemonitorservic notifi file monitor servic set allfil file hashset hash set map set changemap chang map hashmap hash map set set fileeventlisten file event listen fileeventlisten file event listen hashset hash set fileeventlisten file event listen object lock object set notifychang notifi chang hashset hash set set notifycr notifi creat hashset hash set set notifydelet notifi delet hashset hash set map monitoringrequest monitor request map file priorexecut prior execut weakhashmap weak hash map monitoringrequest monitor request map file set monitoringrequest monitor request request linkedhashset link hash set monitoringrequest monitor request add fileeventlisten file event listen lock fileeventlisten file event listen add add monitoringrequest monitor request request lock valid notnul request monitoringrequest monitor request requir ensur exist monitor request don overlap request amend exist request ignor request request directorymonitoringrequest directori monitor request directorymonitoringrequest directori monitor request dmr directorymonitoringrequest directori monitor request request dmr iswatchsubtre watch subtre monitoringrequest monitor request exist request exist directorymonitoringrequest directori monitor request directorymonitoringrequest directori monitor request existingdmr exist dmr directorymonitoringrequest directori monitor request exist existingdmr exist dmr iswatchsubtre watch subtre request exist request directori monitor tree existingdmrpath exist dmr path newdmrpath dmr path existingdmrpath exist dmr path existingdmr exist dmr getfil file getcanonicalpath canon path newdmrpath dmr path dmr getfil file getcanonicalpath canon path ioexcept except ioe illegalstateexcept illeg except unabl resolv canon ioe request directori exist request ignor request unnecessari newdmrpath dmr path startswith start existingdmrpath exist dmr path exist request directori request remov exist request request incorpor existingdmrpath exist dmr path startswith start newdmrpath dmr path remov exist request add request add entri map kei map file object link file lastmodifi modifi time invok file file file invok file directori file directori invok file directori subdirectori includesubtre includ subtre computeentri comput entri map file map file currentfil current file includesubtre includ subtre valid notnul map map requir valid notnul currentfil current file current file requir currentfil current file exist currentfil current file getnam length currentfil current file getnam startswith start currentfil current file getnam equal log roo currentfil current file isdirectori directori isexcludeddirectori exclud directori currentfil current file getpath path map currentfil current file currentfil current file lastmodifi modifi allfil file add currentfil current file getcanonicalpath canon path ioexcept except currentfil current file isdirectori directori file file currentfil current file listfil list file file file length file file file file isfil file includesubtre includ subtre computeentri comput entri map file includesubtre includ subtre sortedset sort set filedetail file detail findmatchingantpath find match ant path antpath ant path valid notblank blank antpath ant path ant path requir sortedset sort set filedetail file detail result treeset tree set filedetail file detail comput start directori refer ant path antpath ant path indexof condit base ensur detect charact charact valid istru ant path fail includ charact antpath ant path newpath path antpath ant path substr newpath path lastindexof file separatorchar separ valid istru fail includ directori separ antpath ant path file separatorchar separ newpath path newpath path substr file somepath path file newpath path somepath path exist path start ant express doesn exist there find search result valid istru somepath path isdirectori directori ant path appear file system path directori search antpath ant path somepath path recursiveantmatch recurs ant match antpath ant path somepath path result result collect getdirtyfil dirti file requestingclass request lock collect changessincelastrequest request changemap chang map requestingclass request changessincelastrequest request changemap chang map requestingclass request linkedhashset link hash set linkedhashset link hash set allfil file collect copyofchangessincelastrequest copi request linkedhashset link hash set changessincelastrequest request changessincelastrequest request clear copyofchangessincelastrequest copi request list fileev file event getfilecreationev file creation event monitoringrequest monitor request request map file priorfil prior file list fileev file event createev creat event arraylist arrai list fileev file event iter iter notifycr notifi creat iter iter hasnext filepath file path iter iswithin request filepath file path iter remov process skip file doesn exist file thisfil file file filepath file path thisfil file exist record notif createev creat event add fileev file event filedetail file detail thisfil file thisfil file lastmodifi modifi fileoper file oper creat updat prior execut map isn notifi priorfil prior file thisfil file thisfil file lastmodifi modifi createev creat event list fileev file event getfiledeletionev file delet event monitoringrequest monitor request request map file priorfil prior file list fileev file event deleteev delet event arraylist arrai list fileev file event iter iter notifydelet notifi delet iter iter hasnext filepath file path iter iswithin request filepath file path iter remov process skip file suddenli exist shouldn notifi delet file thisfil file file filepath file path thisfil file exist record notif deleteev delet event add fileev file event filedetail file detail thisfil file fileoper file oper delet updat prior execut map isn notifi priorfil prior file remov thisfil file deleteev delet event list fileev file event getfileupdateev file updat event monitoringrequest monitor request request map file priorfil prior file list fileev file event updateev updat event arraylist arrai list fileev file event iter iter notifychang notifi chang iter iter hasnext filepath file path iter iswithin request filepath file path iter remov process skip file doesn exist file thisfil file file filepath file path thisfil file exist record notif updateev updat event add fileev file event filedetail file detail thisfil file thisfil file lastmodifi modifi fileoper file oper updat updat prior execut map isn notifi priorfil prior file thisfil file thisfil file lastmodifi modifi remov creat list notifycr notifi creat filepath file path notifycr notifi creat remov filepath file path updateev updat event list filedetail file detail getmonitor monitor lock list filedetail file detail monitor arraylist arrai list filedetail file detail request isempti empti monitor monitoringrequest monitor request request request priorexecut prior execut containskei kei request map file priorfil prior file priorexecut prior execut request entri file entri priorfil prior file entryset entri set monitor add filedetail file detail entri getkei kei entri getvalu monitor isdirti dirti lock notifychang notifi chang isempti empti notifycr notifi creat isempti empti notifydelet notifi delet isempti empti isexcludeddirectori exclud directori path hassrc src path file separ src hassrc src path file separ target path file separ bin hassrc src path file separ maven decid store notif monitor request interest request roo detail filecanonicalpath file canon path notif isnotificationunderknownmonitoringrequest notif monitor request filecanonicalpath file canon path lock monitoringrequest monitor request request request iswithin request filecanonicalpath file canon path iswithin monitoringrequest monitor request request filepath file path requestcanonicalpath request canon path requestcanonicalpath request canon path request getfil file getcanonicalpath canon path ioexcept except request directorymonitoringrequest directori monitor request directorymonitoringrequest directori monitor request dmr directorymonitoringrequest directori monitor request request dmr iswatchsubtre watch subtre filepath file path startswith start requestcanonicalpath request canon path directori directori fileutil file util matchesantpath match ant path requestcanonicalpath request canon path file separ filepath file path directori requestcanonicalpath request canon path equal filepath file path file norequestsorchang request request isempti empti isdirti dirti notifychang notifi chang filecanonicalpath file canon path lock updatechang updat filecanonicalpath file canon path isnotificationunderknownmonitoringrequest notif monitor request filecanonicalpath file canon path notifychang notifi chang add filecanonicalpath file canon path notifycr notifi creat filecanonicalpath file canon path lock updatechang updat filecanonicalpath file canon path isnotificationunderknownmonitoringrequest notif monitor request filecanonicalpath file canon path notifycr notifi creat add filecanonicalpath file canon path notifydelet notifi delet filecanonicalpath file canon path lock updatechang updat filecanonicalpath file canon path isnotificationunderknownmonitoringrequest notif monitor request filecanonicalpath file canon path notifydelet notifi delet add filecanonicalpath file canon path publish event need assum caller acquir synchronis lock eventstopublish event publish publish empti publish list fileev file event eventstopublish event publish eventstopublish event publish isempti empti fileeventlisten file event listen isempti empti eventstopublish event publish isempti empti fileev file event event eventstopublish event publish updatechang updat event getfiledetail file detail getcanonicalpath canon path event getoper oper fileoper file oper delet fileeventlisten file event listen fileeventlisten file event listen onfileev file event event publishrequestedfileev publish request file event eventspublish event publish monitoringrequest monitor request request request list fileev file event eventstopublish event publish arraylist arrai list fileev file event file check map file priorfil prior file priorexecut prior execut request priorfil prior file priorfil prior file hashmap hash map file priorexecut prior execut request priorfil prior file handl file updat creat delet execut eventstopublish event publish addal add getfileupdateev file updat event request priorfil prior file eventstopublish event publish addal add getfilecreationev file creation event request priorfil prior file eventstopublish event publish addal add getfiledeletionev file delet event request priorfil prior file publish eventstopublish event publish eventspublish event publish eventstopublish event publish size eventspublish event publish locat file current directori patch ant path antpath ant path match requir currentdirectori current directori exist directori search requir result append locat file requir recursiveantmatch recurs ant match antpath ant path file currentdirectori current directori sortedset sort set filedetail file detail result valid notnul currentdirectori current directori current directori requir valid istru currentdirectori current directori exist currentdirectori current directori isdirectori directori path exist directori currentdirectori current directori valid notblank blank antpath ant path ant path requir valid notnul result result requir file listfil list file currentdirectori current directori listfil list file listfil list file listfil list file length file listfil list file fileutil file util matchesantpath match ant path antpath ant path getcanonicalpath canon path result add filedetail file detail lastmodifi modifi ioexcept except isdirectori directori recursiveantmatch recurs ant match antpath ant path result remov fileeventlisten file event listen lock fileeventlisten file event listen remov remov monitoringrequest monitor request request lock valid notnul request monitoringrequest monitor request requir advis cessat monitor priorexecut prior execut containskei kei request list fileev file event eventstopublish event publish arraylist arrai list fileev file event map file priorfil prior file priorexecut prior execut request entri file entri priorfil prior file entryset entri set file thisfil file entri getkei kei lastmodifi modifi entri getvalu eventstopublish event publish add fileev file event filedetail file detail thisfil file lastmodifi modifi fileoper file oper monitor finish publish eventstopublish event publish priorexecut prior execut remov request request remov request scanal scan lock request isempti empti monitoringrequest monitor request request request includesubtre includ subtre request directorymonitoringrequest directori monitor request includesubtre includ subtre directorymonitoringrequest directori monitor request request iswatchsubtre watch subtre request getfil file exist build content monitor locat map file currentexecut current execut hashmap hash map file computeentri comput entri currentexecut current execut request getfil file includesubtre includ subtre list fileev file event eventstopublish event publish arraylist arrai list fileev file event priorexecut prior execut containskei kei request perform comparison data previou execut map file priorfil prior file priorexecut prior execut request locat creat modifi file entri file entri currentexecut current execut entryset entri set file thisfil file entri getkei kei currenttimestamp current timestamp entri getvalu priorfil prior file containskei kei thisfil file file exist execut eventstopublish event publish add fileev file event filedetail file detail thisfil file currenttimestamp current timestamp fileoper file oper creat file notifi notifycr notifi creat remov thisfil file getcanonicalpath canon path ioexcept except previoustimestamp previou timestamp priorfil prior file thisfil file currenttimestamp current timestamp equal previoustimestamp previou timestamp modifi eventstopublish event publish add fileev file event filedetail file detail thisfil file currenttimestamp current timestamp fileoper file oper updat file notifi notifychang notifi chang remov thisfil file getcanonicalpath canon path ioexcept except locat delet file priorfil prior file keyset kei set removeal remov currentexecut current execut keyset kei set entri file entri priorfil prior file entryset entri set file deletedfil delet file entri getkei kei eventstopublish event publish add fileev file event filedetail file detail deletedfil delet file entri getvalu fileoper file oper delet file notifi notifydelet notifi delet remov deletedfil delet file getcanonicalpath canon path ioexcept except data previou execut newli monitor locat entri file entri currentexecut current execut entryset entri set eventstopublish event publish add fileev file event filedetail file detail entri getkei kei entri getvalu fileoper file oper monitor start record monitor locat locat content readi execut priorexecut prior execut request currentexecut current execut discard creat delet notif correctli discov loop notifycr notifi creat clear notifydelet notifi delet clear explicitli handl undiscov updat notif ident millisecond updat occur canonicalpath canon path notifychang notifi chang file file file canonicalpath canon path eventstopublish event publish add fileev file event filedetail file detail file file lastmodifi modifi fileoper file oper updat notifychang notifi chang clear publish eventstopublish event publish eventstopublish event publish size scannotifi scan notifi lock norequestsorchang request publishrequestedfileev publish request file event updatechang updat filecanonicalpath file canon path remov requestingclass request changemap chang map keyset kei set remov changemap chang map requestingclass request remov filecanonicalpath file canon path changemap chang map requestingclass request add filecanonicalpath file canon path remov allfil file remov filecanonicalpath file canon path allfil file add filecanonicalpath file canon path 