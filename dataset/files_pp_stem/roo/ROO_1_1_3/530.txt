springframework roo file monitor poll file ioexcept except util arraylist arrai list util hashmap hash map util hashset hash set util linkedhashset link hash set util list util map util set util sortedset sort set util treeset tree set util weakhashmap weak hash map springframework roo file monitor directorymonitoringrequest directori monitor request springframework roo file monitor filemonitorservic file monitor servic springframework roo file monitor monitoringrequest monitor request springframework roo file monitor notifiablefilemonitorservic notifi file monitor servic springframework roo file monitor event filedetail file detail springframework roo file monitor event fileev file event springframework roo file monitor event fileeventlisten file event listen springframework roo file monitor event fileoper file oper springframework roo support util simpl poll base link filemonitorservic file monitor servic implement iter link monitoringrequest monitor request instanc build activ file time execut compar activ file time execut link monitoringrequest monitor request event fire event fire process complet link monitoringrequest monitor request examin implement recogn link fileoper file oper renam event implement ignor monitor file filenam start period hidden file link fileoper file oper delet event implement link fileev file event time equal time delet file modifi time repres delet time time delet detect author ben alex pollingfilemonitorservic poll file monitor servic notifiablefilemonitorservic notifi file monitor servic set fileeventlisten file event listen fileeventlisten file event listen hashset hash set fileeventlisten file event listen set monitoringrequest monitor request request linkedhashset link hash set monitoringrequest monitor request map monitoringrequest monitor request map file priorexecut prior execut weakhashmap weak hash map monitoringrequest monitor request map file set notifychang notifi chang hashset hash set set notifycr notifi creat hashset hash set set notifydelet notifi delet hashset hash set mutex lock add fileeventlisten file event listen lock fileeventlisten file event listen add remov fileeventlisten file event listen lock fileeventlisten file event listen remov list filedetail file detail getmonitor monitor lock list filedetail file detail monitor arraylist arrai list filedetail file detail request size monitor monitoringrequest monitor request request request priorexecut prior execut containskei kei request map file priorfil prior file priorexecut prior execut request file priorfil prior file priorfil prior file keyset kei set monitor add filedetail file detail priorfil prior file priorfil prior file priorfil prior file monitor isdirti dirti lock notifychang notifi chang size notifycr notifi creat size notifydelet notifi delet size iswithin monitoringrequest monitor request request filepath file path requestcanonicalpath request canon path requestcanonicalpath request canon path request getfil file getcanonicalpath canon path ioexcept except request directorymonitoringrequest directori monitor request directorymonitoringrequest directori monitor request dmr directorymonitoringrequest directori monitor request request dmr iswatchsubtre watch subtre filepath file path startswith start requestcanonicalpath request canon path directori directori filedetail file detail matchesantpath match ant path requestcanonicalpath request canon path file separ filepath file path directori requestcanonicalpath request canon path equal filepath file path file scannotifi scan notifi lock request size isdirti dirti notifi monitoringrequest monitor request request request list fileev file event eventstopublish event publish arraylist arrai list fileev file event priorexecut prior execut containskei kei request perform comparison data previou execut map file priorfil prior file priorexecut prior execut request handl file updat execut set toremov remov hashset hash set filepath file path notifychang notifi chang skip notif doesn fall monitor request iswithin request filepath file path record remov process toremov remov add filepath file path skip file doesn exist file thisfil file file filepath file path thisfil file exist record notif eventstopublish event publish add fileev file event filedetail file detail thisfil file thisfil file lastmodifi modifi fileoper file oper updat updat prior execut map isn notifi priorfil prior file thisfil file thisfil file lastmodifi modifi remov creat list notifycr notifi creat filepath file path notifycr notifi creat remov filepath file path remov toremov remov notifychang notifi chang remov remov handl file creat execut toremov remov hashset hash set filepath file path notifycr notifi creat skip notif doesn fall monitor request iswithin request filepath file path record remov process toremov remov add filepath file path skip file doesn exist file thisfil file file filepath file path thisfil file exist record notif eventstopublish event publish add fileev file event filedetail file detail thisfil file thisfil file lastmodifi modifi fileoper file oper creat updat prior execut map isn notifi priorfil prior file thisfil file thisfil file lastmodifi modifi remov toremov remov notifycr notifi creat remov remov handl file delet execut toremov remov hashset hash set filepath file path notifydelet notifi delet skip notif doesn fall monitor request iswithin request filepath file path record remov process toremov remov add filepath file path skip file suddenli exist shouldn notifi delet file thisfil file file filepath file path thisfil file exist record notif eventstopublish event publish add fileev file event filedetail file detail thisfil file fileoper file oper delet updat prior execut map isn notifi priorfil prior file remov thisfil file remov toremov remov notifydelet notifi delet remov remov publish eventstopublish event publish eventstopublish event publish size scanal scan lock request size monitoringrequest monitor request request request includesubtre includ subtre request directorymonitoringrequest directori monitor request includesubtre includ subtre directorymonitoringrequest directori monitor request request iswatchsubtre watch subtre request getfil file exist build content monitor locat map file currentexecut current execut hashmap hash map file computeentri comput entri currentexecut current execut request getfil file includesubtre includ subtre list fileev file event eventstopublish event publish arraylist arrai list fileev file event priorexecut prior execut containskei kei request perform comparison data previou execut map file priorfil prior file priorexecut prior execut request locat creat modifi file file thisfil file currentexecut current execut keyset kei set priorfil prior file containskei kei thisfil file file exist execut eventstopublish event publish add fileev file event filedetail file detail thisfil file currentexecut current execut thisfil file fileoper file oper creat file notifi notifycr notifi creat remov thisfil file getcanonicalpath canon path ioexcept except currenttimestamp current timestamp currentexecut current execut thisfil file previoustimestamp previou timestamp priorfil prior file thisfil file currenttimestamp current timestamp equal previoustimestamp previou timestamp modifi eventstopublish event publish add fileev file event filedetail file detail thisfil file currentexecut current execut thisfil file fileoper file oper updat file notifi notifychang notifi chang remov thisfil file getcanonicalpath canon path ioexcept except locat delet file priorfil prior file keyset kei set removeal remov currentexecut current execut keyset kei set file deletedfil delet file priorfil prior file keyset kei set eventstopublish event publish add fileev file event filedetail file detail deletedfil delet file priorfil prior file deletedfil delet file fileoper file oper delet file notifi notifydelet notifi delet remov deletedfil delet file getcanonicalpath canon path ioexcept except data previou execut newli monitor locat file thisfil file currentexecut current execut keyset kei set eventstopublish event publish add fileev file event filedetail file detail thisfil file currentexecut current execut thisfil file fileoper file oper monitor start record monitor locat locat content readi execut priorexecut prior execut request currentexecut current execut discard creat delet notif correctli discov loop notifycr notifi creat clear notifydelet notifi delet clear explicitli handl undiscov updat notif ident millisecond updat occur canonicalpath canon path notifychang notifi chang file file file canonicalpath canon path eventstopublish event publish add fileev file event filedetail file detail file file lastmodifi modifi fileoper file oper updat notifychang notifi chang clear publish eventstopublish event publish eventstopublish event publish size publish event need assum caller acquir synchronis lock eventstopublish event publish publish empti publish list fileev file event eventstopublish event publish eventstopublish event publish size fileeventlisten file event listen size eventstopublish event publish size fileev file event event eventstopublish event publish fileeventlisten file event listen fileeventlisten file event listen onfileev file event event add entri map kei map file object link file lastmodifi modifi time invok file file file invok file directori file directori invok file directori subdirectori includesubtre includ subtre computeentri comput entri map file map file currentfil current file includesubtre includ subtre notnul map map requir notnul currentfil current file current file requir currentfil current file exist currentfil current file getnam length currentfil current file getnam startswith start map currentfil current file currentfil current file lastmodifi modifi currentfil current file isdirectori directori file file currentfil current file listfil list file file file length file file file file isfil file includesubtre includ subtre computeentri comput entri map file includesubtre includ subtre add monitoringrequest monitor request request lock notnul request monitoringrequest monitor request requir ensur exist monitor request don overlap request amend exist request ignor request request directorymonitoringrequest directori monitor request directorymonitoringrequest directori monitor request dmr directorymonitoringrequest directori monitor request request dmr iswatchsubtre watch subtre monitoringrequest monitor request exist request exist directorymonitoringrequest directori monitor request directorymonitoringrequest directori monitor request existingdmr exist dmr directorymonitoringrequest directori monitor request exist existingdmr exist dmr iswatchsubtre watch subtre request exist request directori monitor tree existingdmrpath exist dmr path newdmrpath dmr path existingdmrpath exist dmr path existingdmr exist dmr getfil file getcanonicalpath canon path newdmrpath dmr path dmr getfil file getcanonicalpath canon path ioexcept except ioe illegalstateexcept illeg except unabl resolv canon ioe request directori exist request ignor request unnecessari newdmrpath dmr path startswith start existingdmrpath exist dmr path exist request directori request remov exist request request incorpor existingdmrpath exist dmr path startswith start newdmrpath dmr path remov exist request add request remov monitoringrequest monitor request request lock notnul request monitoringrequest monitor request requir advis cessat monitor priorexecut prior execut containskei kei request list fileev file event eventstopublish event publish arraylist arrai list fileev file event map file priorfil prior file priorexecut prior execut request file thisfil file priorfil prior file keyset kei set eventstopublish event publish add fileev file event filedetail file detail thisfil file priorfil prior file thisfil file fileoper file oper monitor finish publish eventstopublish event publish priorexecut prior execut remov request request remov request sortedset sort set filedetail file detail findmatchingantpath find match ant path antpath ant path hastext text antpath ant path ant path requir sortedset sort set filedetail file detail result treeset tree set filedetail file detail comput start directori refer ant path antpath ant path indexof condit base ensur detect charact charact istru antpath ant path ant path fail includ charact newpath path antpath ant path substr newpath path lastindexof file separatorchar separ istru antpath ant path fail includ file separatorchar separ directori separ newpath path newpath path substr file somepath path file newpath path somepath path exist path start ant express doesn exist there find search result istru somepath path isdirectori directori ant path antpath ant path appear file system path somepath path directori search recursiveantmatch recurs ant match antpath ant path somepath path result result locat file current directori patch ant path antpath ant path match requir currentdirectori current directori exist directori search requir result append locat file requir recursiveantmatch recurs ant match antpath ant path file currentdirectori current directori sortedset sort set filedetail file detail result notnul currentdirectori current directori current directori requir istru currentdirectori current directori exist currentdirectori current directori isdirectori directori path currentdirectori current directori exist directori hastext text antpath ant path ant path requir notnul result result requir file listfil list file currentdirectori current directori listfil list file listfil list file listfil list file length file listfil list file filedetail file detail matchesantpath match ant path antpath ant path getcanonicalpath canon path result add filedetail file detail lastmodifi modifi ioexcept except isfil file recursiveantmatch recurs ant match antpath ant path result decid store notif monitor request interest request roo detail filecanonicalpath file canon path notif isnotificationunderknownmonitoringrequest notif monitor request filecanonicalpath file canon path lock monitoringrequest monitor request request request iswithin request filecanonicalpath file canon path notifychang notifi chang filecanonicalpath file canon path lock isnotificationunderknownmonitoringrequest notif monitor request filecanonicalpath file canon path notifychang notifi chang add filecanonicalpath file canon path notifycr notifi creat filecanonicalpath file canon path lock isnotificationunderknownmonitoringrequest notif monitor request filecanonicalpath file canon path notifycr notifi creat add filecanonicalpath file canon path notifydelet notifi delet filecanonicalpath file canon path lock isnotificationunderknownmonitoringrequest notif monitor request filecanonicalpath file canon path notifydelet notifi delet add filecanonicalpath file canon path 