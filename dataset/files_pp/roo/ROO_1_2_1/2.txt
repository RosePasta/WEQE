springframework roo addon backup file fileinputstream file input stream filenotfoundexception file exception filenamefilter filename filter ioexception exception inputstream input stream text dateformat format text simpledateformat simple format util util logging logger util zip zipentry zip entry util zip zipoutputstream zip output stream commons ioutils utils commons lang lang validate felix scr annotations component felix scr annotations reference felix scr annotations service springframework roo process manager filemanager file manager springframework roo process manager mutablefile mutable file springframework roo project path springframework roo project projectoperations project operations springframework roo support logging handlerutils handler utils springframework roo support util fileutils file utils operations backup add author stefan schmidt author ben alex author alan stewart component service backupoperationsimpl backup operations impl backupoperations backup operations logger logger handlerutils handler utils getlogger logger backupoperationsimpl backup operations impl reference filemanager file manager filemanager file manager reference projectoperations project operations projectoperations project operations backup validate istrue isbackuppossible backup project metadata unavailable windows format legally form filename roo pattern file separatorchar separator yyyy yyyy dateformat format simpledateformat simple format pattern start system nanotime nano time zipoutputstream zip output stream zos file projectdirectory project directory file projectoperations project operations getpathresolver path resolver getfocusedidentifier focused identifier path root mutablefile mutable file file filemanager file manager createfile create file fileutils file utils getcanonicalpath canonical path file projectdirectory project directory projectoperations project operations getfocusedprojectname focused project format zip zos zipoutputstream zip output stream file getoutputstream output stream zip projectdirectory project directory projectdirectory project directory zos filenotfoundexception file exception logger fine determine project directory ioexception exception logger fine create backup archive ioutils utils closequietly close quietly zos milliseconds system nanotime nano time start backup completed milliseconds isbackuppossible backup projectoperations project operations isfocusedprojectavailable focused project zip file directory file base zipoutputstream zip output stream zos ioexception exception file files directory listfiles list files filenamefilter filename filter accept file dir don directory target base dir equals base equals target skip existing backup files dir equals base endswith ends zip skip files start startswith starts file file files file isdirectory directory file listfiles list files length zipentry zip entry direntry dir entry zipentry zip entry file getpath path substring base getpath path length file separatorchar separator zos putnextentry entry direntry dir entry zip file base zos inputstream input stream inputstream input stream zipentry zip entry entry zipentry zip entry file getpath path substring base getpath path length zos putnextentry entry entry inputstream input stream fileinputstream file input stream file ioutils utils write ioutils utils tobytearray array inputstream input stream zos ioutils utils closequietly close quietly inputstream input stream