springframework roo addon backup file fileinputstream file input stream filenotfoundexception file exception filenamefilter filename filter ioexception exception text dateformat format text simpledateformat simple format util util logging logger util zip zipentry zip entry util zip zipoutputstream zip output stream felix scr annotations component felix scr annotations reference felix scr annotations service springframework roo file monitor event filedetails file details springframework roo process manager filemanager file manager springframework roo process manager mutablefile mutable file springframework roo project path springframework roo project projectoperations project operations springframework roo support logging handlerutils handler utils springframework roo support util operations backup add author stefan schmidt author ben alex author alan stewart component service backupoperationsimpl backup operations impl backupoperations backup operations logger logger handlerutils handler utils getlogger logger backupoperationsimpl backup operations impl reference filemanager file manager filemanager file manager reference projectoperations project operations projectoperations project operations isbackupavailable backup projectoperations project operations isprojectavailable project backup istrue isbackupavailable backup project metadata unavailable dateformat format simpledateformat simple format yyyy file separatorchar separator windows format legally form filename roo simpledateformat simple format yyyy start system nanotime nano time file projectdirectory project directory file projectoperations project operations getpathresolver path resolver getidentifier identifier path root mutablefile mutable file file filemanager file manager createfile create file filedetails file details getcanonicalpath canonical path file projectdirectory project directory projectoperations project operations getprojectmetadata project metadata getprojectname project format zip zipoutputstream zip output stream zos zipoutputstream zip output stream file getoutputstream output stream zip projectdirectory project directory projectdirectory project directory zos zos close filenotfoundexception file exception logger fine determine project directory ioexception exception logger fine create backup archive milliseconds system nanotime nano time start backup completed milliseconds zip file directory file base zipoutputstream zip output stream zos ioexception exception file files directory listfiles list files filenamefilter filename filter accept file dir don directory target base dir equals base equals target skip existing backup files dir equals base endswith ends zip include dbre xml dir equals base equals roo dbre skip files start startswith starts buffer read files length files isdirectory directory files listfiles list files length zipentry zip entry direntry dir entry zipentry zip entry files getpath path substring base getpath path length system getproperty property file separator zos putnextentry entry direntry dir entry zip files base zos fileinputstream file input stream fileinputstream file input stream files zipentry zip entry entry zipentry zip entry files getpath path substring base getpath path length zos putnextentry entry entry read read buffer zos write buffer read close