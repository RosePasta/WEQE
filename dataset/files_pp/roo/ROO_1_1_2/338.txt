springframework roo bootstrap bufferedreader buffered reader file filenotfoundexception file exception ioexception exception inputstream input stream inputstreamreader input stream reader net malformedurlexception malformed url exception net url util enumeration util properties felix framework util util osgi framework constants osgi framework launch framework osgi framework launch frameworkfactory framework factory loads roo felix based felix felix felix maximum compatibility felix minimal original change original felix version comment author ben alex suppresswarnings suppress warnings change original felix version bundle directory bundle dir property launcher install shutdown hook shutdown hook prop felix shutdown hook property url system property file system properties prop felix system properties system properties file system properties file system properties property url configuration property file created framework instance config properties prop felix config properties configuration properties file config properties file config properties configuration directory config directory conf framework fwk performs task constructing framework instance starting execution functions performed invoked examine verify command arguments launcher accepts command set bundle auto deploy directory single argument set bundle cache directory read system properties file file properties pushed system setproperty set property starting framework mechanism shorthand people starting framework command avoid bunch system property definitions properties defined file impact framework framework behavior setting http proxies http proxyhost proxy host http proxyport proxy port http proxyauth proxy generally speaking framework system properties read framework framework configuration property file file properties configure framework instance pass configuration bundles installed framework instance configuration property file called config properties located conf directory felix installation directory parent directory directory felix jar file location property file desired url felix config properties system property set syntax executing jvm config properties file values configuration properties refer href felix html felix util map felix constructor documentation framework configuration properties copy configuration properties system properties set configuration properties felix framework consult system properties configuration convenient command launching felix felix launcher copies configuration properties system properties set configuration properties passed felix add shutdown hook framework shutdowns cleanly launcher installs shutdown hook disabled felix shutdown hook configuration property create initialize framework instance osgi standard frameworkfactory framework factory retrieved meta inf services create framework instance configuration properties auto deploy bundles bundles auto deploy directory deployed framework instance start framework framework started launcher thread waits framework shutdown simply starting instance framework create interactive session install start bundles provide interact framework generally bundles auto deploy directory auto start property configuration property file bundles providing interact framework installed configuration property file framework hung deadlocked executing correctly interact launcher ways deploy bundles framework startup configuration properties bundle auto deploy automatically deploys bundles directory controlled configuration properties felix auto deploy dir specifies auto deploy directory bundles automatically deploy framework startup bundle directory current directory felix auto deploy action specifies auto deploy actions bundle jar files auto deploy directory actions install update start uninstall actions auto deploy directory processed property bundle auto properties configuration properties urls bundles install start felix auto install space delimited list bundle urls automatically install framework started start level bundle installed felix auto install felix auto start space delimited list bundle urls automatically install start framework started start level bundle installed felix auto start properties config properties processed launcher framework startup process accepts arguments set auto deploy directory bundle cache directory exception error occurs exception bundle directory cache directory support argument bundle cache directory bundledir bundle dir cachedir cache dir expectbundledir expect bundle dir length equals bundle dir expectbundledir expect bundle dir expectbundledir expect bundle dir bundledir bundle dir expectbundledir expect bundle dir cachedir cache dir length expectbundledir expect bundle dir bundledir bundle dir system println usage bundle deploy dir bundle cache dir system exit load system properties loadsystemproperties load system properties read configuration properties properties configprops config props loadconfigproperties load config properties configuration properties create empty properties object configprops config props system err println config properties file configprops config props properties copy framework properties system properties copysystemproperties copy system properties configprops config props passed bundle auto deploy directory overwrites config file bundledir bundle dir configprops config props setproperty set property autoprocessor auto processor auto deploy dir propery bundledir bundle dir passed bundle cache directory overwrites config file cachedir cache dir configprops config props setproperty set property constants framework storage cachedir cache dir enabled register shutdown hook framework cleanly shutdown exits enablehook enable hook configprops config props getproperty property shutdown hook prop enablehook enable hook enablehook enable hook equalsignorecase equals ignore runtime getruntime runtime addshutdownhook add shutdown hook thread spring roo felix shutdown hook change original felix version fwk fwk fwk waitforstop wait exception system err println error stopping framework change original felix version startednanoseconds started nanoseconds system nanotime nano time change original felix version create instance framework frameworkfactory framework factory factory getframeworkfactory framework factory fwk factory newframework framework configprops config props initialize framework don start fwk init system bundle context process auto deploy auto install auto start properties autoprocessor auto processor process configprops config props fwk getbundlecontext bundle context start framework fwk start wait framework exit fwk waitforstop wait change original felix version exitcode exit code system getproperty property roo exit integer system getproperty property roo exit intvalue devmodeatshutdown dev mode shutdown system getproperty property developmentmode development mode system getproperty property developmentmode development mode equals tostring devmodeatshutdown dev mode shutdown uptimenanoseconds uptime nanoseconds system nanotime nano time startednanoseconds started nanoseconds system println total execution time uptimenanoseconds uptime nanoseconds seconds system exit exitcode exit code change original felix version exception system err println create framework printstacktrace print stack trace system exit change original felix version simple parse meta inf services file framework factory assumes commented framework factory implementation created frameworkfactory framework factory instance exception errors occur frameworkfactory framework factory getframeworkfactory framework factory exception url url getclassloader loader getresource resource meta inf services osgi framework launch frameworkfactory framework factory url bufferedreader buffered reader bufferedreader buffered reader inputstreamreader input stream reader url openstream open stream readline read readline read trim load empty commented length charat frameworkfactory framework factory forname newinstance instance close exception find framework factory loads properties system property file framework installation system setproperty set property properties framework system property file located conf directory felix installation directory called system properties installation directory felix assumed parent directory felix jar file system path property precise file load system properties set initializing felix system properties system property arbitrary url loadsystemproperties load system properties system properties file system property directory felix jar file load places property url property url propurl prop url custom system getproperty property system properties prop custom propurl prop url url custom malformedurlexception malformed url exception system err print determine configuration directory figuring felix jar located system path file confdir conf dir classpath system getproperty property path classpath tolowercase indexof felix jar start classpath lastindexof file pathseparator path separator start path felix jar file jarlocation jar location classpath substring start calculate conf directory based parent directory felix jar directory confdir conf dir file file file jarlocation jar location getabsolutepath absolute path getparent parent config directory can figure current directory confdir conf dir file system getproperty property user dir config directory propurl prop url file confdir conf dir system properties file tourl url malformedurlexception malformed url exception system err print read properties file properties props properties inputstream input stream propurl prop url openconnection open connection getinputstream input stream props load close filenotfoundexception file exception ignore file exception system err println error loading system properties propurl prop url system err println close ioexception exception perform variable substitution properties enumeration props propertynames property names hasmoreelements elements nextelement element system setproperty set property util substvars subst vars props getproperty property loads configuration properties configuration property file framework installation properties accessible framework bundles intended configuration purposes configuration property file located conf directory felix installation directory called config properties installation directory felix assumed parent directory felix jar file system path property precise file load configuration properties set initializing felix config properties system property arbitrary url properties instance error properties loadconfigproperties load config properties config properties file system property conf directory felix installation directory load places property url property url propurl prop url custom system getproperty property config properties prop custom propurl prop url url custom malformedurlexception malformed url exception system err print determine configuration directory figuring felix jar located system path file confdir conf dir classpath system getproperty property path classpath tolowercase indexof felix jar start classpath lastindexof file pathseparator path separator start path felix jar file jarlocation jar location classpath substring start calculate conf directory based parent directory felix jar directory confdir conf dir file file file jarlocation jar location getabsolutepath absolute path getparent parent config directory can figure current directory confdir conf dir file system getproperty property user dir config directory propurl prop url file confdir conf dir config properties file tourl url malformedurlexception malformed url exception system err print read properties file properties props properties inputstream input stream load config properties propurl prop url openconnection open connection getinputstream input stream props load close exception close input stream close ioexception exception perform variable substitution system properties enumeration props propertynames property names hasmoreelements elements nextelement element props setproperty set property util substvars subst vars props getproperty property props props copysystemproperties copy system properties properties configprops config props enumeration system getproperties properties propertynames property names hasmoreelements elements key nextelement element key startswith starts felix key startswith starts osgi framework configprops config props setproperty set property key system getproperty property key