springframework roo addon jpa junit assertequals equals mockito matchers mockito mockito verify mockito mockito springframework roo addon jpa jdbcdatabase jdbc database memory springframework roo addon jpa jpaoperationsimpl jpa operations impl jpa dialects file springframework roo addon jpa jpaoperationsimpl jpa operations impl persistence xml springframework roo addon jpa ormprovider orm provider hibernate bytearrayinputstream array input stream inputstream input stream util properties junit junit test mockito argumentcaptor argument captor mockito mock mockito mockitoannotations mockito annotations springframework roo addon propfiles propfileoperations prop file operations springframework roo process manager filemanager file manager springframework roo project path springframework roo project pathresolver path resolver springframework roo project projectoperations project operations springframework roo support util stringutils utils unit test link jpaoperationsimpl jpa operations impl author andrew swan jpaoperationsimpltest jpa operations impl test constants application context path path app context dialect dbdialect dialect host mydbhost host jndi mydatasource data source mydbname password mydbpassword password user mydbusername user persistence path path persistence persistence unit mypersistenceunit persistence unit pom path path pom transaction manager mytransactionmanager transaction manager fixture jpaoperationsimpl jpa operations impl jpaoperations jpa operations properties dialects mock filemanager file manager mockfilemanager mock file manager mock pathresolver path resolver mockpathresolver mock path resolver mock projectoperations project operations mockprojectoperations mock project operations mock propfileoperations prop file operations mockpropfileoperations mock prop file operations setup set mockitoannotations mockito annotations initmocks init mocks mocks mockprojectoperations mock project operations getpathresolver path resolver thenreturn mockpathresolver mock path resolver mockpathresolver mock path resolver getfocusedidentifier focused identifier path root jpaoperationsimpl jpa operations impl pom xml thenreturn pom path mockpathresolver mock path resolver getfocusedidentifier focused identifier path spring config root jpaoperationsimpl jpa operations impl application context xml thenreturn application context path object test jpaoperations jpa operations jpaoperationsimpl jpa operations impl jpaoperations jpa operations pathresolver path resolver mockpathresolver mock path resolver jpaoperations jpa operations filemanager file manager mockfilemanager mock file manager jpaoperations jpa operations projectoperations project operations mockprojectoperations mock project operations jpaoperations jpa operations propfileoperations prop file operations mockpropfileoperations mock prop file operations hard ugly mock dialects properties pom xml version encoding utf project build plugins plugin groupid group maven plugins groupid group artifactid artifact maven plugin artifactid artifact version version configuration additionalbuildcommands additional buildcommands additionalbuildcommands additional buildcommands additionalprojectnatures additional projectnatures additionalprojectnatures additional projectnatures configuration plugin plugins build project app context xml version encoding utf beans beans creates link inputstream input stream time read spring application context pom application context xml required fresh stream inputstream input stream getappcontextinputstream app context input stream appcontext app context bytearrayinputstream array input stream appcontext app context getbytes bytes creates link inputstream input stream time read pom pom pom xml required fresh stream bytearrayinputstream array input stream getpominputstream pom input stream pom bytearrayinputstream array input stream pom getbytes bytes expected application context xml version encoding utf standalone beans bean commons dbcp basicdatasource basic data source destroy close datasource data source property driverclassname driver database driverclassname driver property url database url property username database username property password database password property testonborrow test borrow property testonreturn test property testwhileidle test idle property timebetweenevictionrunsmillis time eviction runs millis property numtestsperevictionrun num tests eviction property minevictableidletimemillis min evictable idle time millis bean bean springframework orm jpa jpatransactionmanager jpa transaction manager mytransactionmanager transaction manager property entitymanagerfactory entity manager factory entitymanagerfactory entity manager factory bean annotation driven mode transaction manager mytransactionmanager transaction manager bean springframework orm jpa localcontainerentitymanagerfactorybean local container entity manager factory bean entitymanagerfactory entity manager factory property persistenceunitname persistence unit mypersistenceunit persistence unit property datasource data source datasource data source bean beans expected jndi application context xml version encoding utf standalone beans jee jndi lookup datasource data source jndi mydatasource data source bean springframework orm jpa jpatransactionmanager jpa transaction manager mytransactionmanager transaction manager property entitymanagerfactory entity manager factory entitymanagerfactory entity manager factory bean annotation driven mode transaction manager mytransactionmanager transaction manager bean springframework orm jpa localcontainerentitymanagerfactorybean local container entity manager factory bean entitymanagerfactory entity manager factory property persistenceunitname persistence unit mypersistenceunit persistence unit property datasource data source datasource data source bean beans expected persistence xml memory hibernate xml version encoding utf standalone persistence xmlns http sun xml persistence xmlns xsi http xmlschema xml schema instance version xsi schemalocation schema location http sun xml persistence http sun xml persistence persistence xsd persistence unit mypersistenceunit persistence unit transaction type resource local provider hibernate ejb hibernatepersistence hibernate persistence provider properties property hibernate dialect dbdialect dialect create build database update modify existing database create drop create drops tables hibernate closes validate database property hibernate hbm ddl hbm ddl auto create property hibernate ejb naming strategy hibernate cfg improvednamingstrategy improved naming strategy property hibernate connection charset set utf uncomment properties jboss boss property hibernate validator apply ddl property hibernate validator autoregister listeners properties persistence unit persistence test testconfigurejpaforh inmemoryandhibernatefornewproject test configure jpa memory hibernate project set mockfilemanager mock file manager getinputstream input stream pom path thenreturn getpominputstream pom input stream pom getpominputstream pom input stream pom mockfilemanager mock file manager getinputstream input stream application context path thenreturn getappcontextinputstream app context input stream app context mockpathresolver mock path resolver getfocusedidentifier focused identifier path src resources persistence xml thenreturn persistence path mockfilemanager mock file manager exists persistence path thenreturn existing persistence xml mockpropfileoperations mock prop file operations loadproperties load properties jpa dialects file jpaoperationsimpl jpa operations impl thenreturn dialects ormprovider orm provider ormprovider orm provider hibernate jdbcdatabase jdbc database jdbcdatabase jdbc database memory dialects ormprovider orm provider jdbcdatabase jdbc database dialect invoke jpaoperations jpa operations configurejpa configure jpa ormprovider orm provider jdbcdatabase jdbc database host user password transaction manager persistence unit check verifyfileupdate verify file update expected application context application context path verifyfileupdate verify file update expected persistence xml memory hibernate persistence path test testconfigurejpaforh inmemoryandhibernateandjndifornewproject test configure jpa memory hibernate jndi project set mockfilemanager mock file manager getinputstream input stream pom path thenreturn getpominputstream pom input stream pom getpominputstream pom input stream pom mockfilemanager mock file manager getinputstream input stream application context path thenreturn getappcontextinputstream app context input stream app context mockpathresolver mock path resolver getfocusedidentifier focused identifier path src resources persistence xml thenreturn persistence path mockfilemanager mock file manager exists persistence path thenreturn existing persistence xml mockpropfileoperations mock prop file operations loadproperties load properties jpa dialects file jpaoperationsimpl jpa operations impl thenreturn dialects ormprovider orm provider ormprovider orm provider hibernate jdbcdatabase jdbc database jdbcdatabase jdbc database memory dialects ormprovider orm provider jdbcdatabase jdbc database dialect invoke jpaoperations jpa operations configurejpa configure jpa ormprovider orm provider jdbcdatabase jdbc database jndi host user password transaction manager persistence unit check verifyfileupdate verify file update expected jndi application context application context path verifyfileupdate verify file update expected persistence xml memory hibernate persistence path verifies mock link filemanager file manager asked write contents file expectedcontents expected contents contents expect written filename file expect written verifyfileupdate verify file update expectedcontents expected contents filename argumentcaptor argument captor textcaptor text captor argumentcaptor argument captor forclass verify mockfilemanager mock file manager createorupdatetextfileifrequired create update text file required filename textcaptor text captor capture replace dummy terminator platform specific applied xmlutils xml utils nodetostring node normalisedcontents normalised contents expectedcontents expected contents replace stringutils utils separator assertequals equals normalisedcontents normalised contents textcaptor text captor getvalue