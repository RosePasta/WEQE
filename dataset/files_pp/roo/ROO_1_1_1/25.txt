springframework roo addon dbre bytearrayoutputstream array output stream fileinputstream file input stream inputstream input stream outputstream output stream sql connection sql databasemetadata database meta data sql sqlexception sql exception util collections util hashmap hash map util hashset hash set util list util map util properties util set javax xml parsers documentbuilder document builder felix scr annotations component felix scr annotations reference felix scr annotations referencecardinality reference cardinality felix scr annotations referencepolicy reference policy felix scr annotations referencestrategy reference strategy felix scr annotations service osgi service component componentcontext component context springframework roo addon dbre jdbc connectionprovider connection provider springframework roo addon dbre model database springframework roo addon dbre model databaseintrospector database introspector springframework roo addon dbre model databasexmlutils database xml utils springframework roo addon dbre model schema springframework roo addon propfiles propfileoperations prop file operations springframework roo file monitor event filedetails file details springframework roo process manager filemanager file manager springframework roo process manager event processmanagerstatus process manager status springframework roo process manager event processmanagerstatuslistener process manager status listener springframework roo process manager event processmanagerstatusprovider process manager status provider springframework roo project path springframework roo project pathresolver path resolver springframework roo support util springframework roo support util stringutils utils springframework roo support util xmlutils xml utils dom document dom element implementation link dbremodelservice dbre model service author alan stewart component service reference databaselistener database listener strategy referencestrategy reference strategy event policy referencepolicy reference policy dynamic referenceinterface reference databaselistener database listener cardinality referencecardinality reference cardinality optional multiple dbremodelserviceimpl dbre model service impl dbremodelservice dbre model service processmanagerstatuslistener process manager status listener reference propfileoperations prop file operations propfileoperations prop file operations reference pathresolver path resolver pathresolver path resolver reference filemanager file manager filemanager file manager reference connectionprovider connection provider connectionprovider connection provider reference processmanagerstatusprovider process manager status provider processmanagerstatusprovider process manager status provider map schema database cachedintrospections cached introspections hashmap hash map schema database schema lastschema schema view set includetables include tables set excludetables exclude tables set databaselistener database listener listeners hashset hash set databaselistener database listener startupcompleted startup completed activate componentcontext component context context processmanagerstatusprovider process manager status provider addprocessmanagerstatuslistener add process manager status listener deactivate componentcontext component context context processmanagerstatusprovider process manager status provider removeprocessmanagerstatuslistener remove process manager status listener onprocessmanagerstatuschange process manager status change processmanagerstatus process manager status oldstatus status processmanagerstatus process manager status newstatus status considerstartup startup newstatus status considerstartup startup processmanagerstatus process manager status newstatus status newstatus status processmanagerstatus process manager status startupcompleted startup completed time starting listeners database startupcompleted startup completed simply calling registered listeners discover database getdatabase database lastschema schema binddatabaselistener bind database listener databaselistener database listener listener listeners listeners add listener startupcompleted startup completed lastschema schema listener missed startup event share they online safe mode avoid telling database separately database database getdatabase database lastschema schema database listener notifydatabaserefreshed notify database refreshed database runtimeexception runtime exception unbinddatabaselistener unbind database listener databaselistener database listener listener listeners listeners remove listener supportsschema supports schema displayaddons display add ons runtimeexception runtime exception connection connection connection getconnection connection displayaddons display add ons databasemetadata database meta data databasemetadata database meta data connection getmetadata meta data schematerm schema term databasemetadata database meta data getschematerm schema term stringutils utils hastext text schematerm schema term schematerm schema term equalsignorecase equals ignore schema exception illegalstateexception illegal exception connectionprovider connection provider closeconnection close connection connection set schema getdatabaseschemas database schemas displayaddons display add ons connection connection connection getconnection connection displayaddons display add ons databaseintrospector database introspector introspector databaseintrospector database introspector connection introspector getschemas schemas exception collections emptyset empty set connectionprovider connection provider closeconnection close connection connection schema getlastschema schema they command schema set lastschema schema lastschema schema fallback compute file load note change schema field getter side free deserializeschemametadataifpossible deserialize schema metadata database getdatabase database schema schema cached copy dbre xml file sourced version getdatabase database schema database refreshdatabase refresh database schema schema force grab getdatabase database schema database refreshdatabasesafely refresh database safely schema schema getdatabase database schema setview set view view view view setincludetables set include tables set includetables include tables includetables include tables includetables include tables setexcludetables set exclude tables set excludetables exclude tables excludetables exclude tables excludetables exclude tables database getdatabase database schema schema forcereadfromdatabase force read database safemode safe mode safemode safe mode notnull schema schema required schema safe mode earlier assertions schema getlastschema schema determine schema getdatabase database forcereadfromdatabase force read database safemode safe mode notnull schema schema required store schema schema call happen schema safemode safe mode lastschema schema schema forcereadfromdatabase force read database cachedintrospections cached introspections containskey key schema cachedintrospections cached introspections schema read roo dbre xml file schema database database deserializedatabasemetadataifpossible deserialize database metadata database database getschema schema equals schema deserialized disk database cache safemode safe mode cachedintrospections cached introspections schema database publishtolisteners publish listeners database database connection connection connection getconnection connection databaseintrospector database introspector introspector databaseintrospector database introspector connection schema view includetables include tables excludetables exclude tables database database introspector createdatabase create database safemode safe mode don change notify leave database worked store cachedintrospections cached introspections schema database store time load roo they aeroplane flying sydney san francisco don database todo detect gps coordinates they syd sfo database database hastables tables serializedatabasemetadatatofile serialize database metadata file database lastly let listeners publishtolisteners publish listeners database database exception illegalstateexception illegal exception connectionprovider connection provider closeconnection close connection connection publishtolisteners publish listeners database database listeners databaselistener database listener listener listeners listener notifydatabaserefreshed notify database refreshed database runtimeexception runtime exception ignoreandmoveon ignore move writes database xml note xml file store database database serialize disk required serializedatabasemetadatatofile serialize database metadata file database database notnull database database required path getdbrexmlpath dbre xml path outputstream output stream outputstream output stream bytearrayoutputstream array output stream databasexmlutils database xml utils writedatabasestructuretooutputstream write database structure output stream database outputstream output stream filemanager file manager createorupdatetextfileifrequired create update text file required path outputstream output stream tostring reads database schema xml note xml file store database database schema parsed unavailable reason schema deserializeschemametadataifpossible deserialize schema metadata dbrexmlpath dbre xml path getdbrexmlpath dbre xml path filemanager file manager exists dbrexmlpath dbre xml path filedetails file details filedetails file details filemanager file manager readfile read file dbrexmlpath dbre xml path inputstream input stream inputstream input stream fileinputstream file input stream filedetails file details getfile file databasexmlutils database xml utils readschemafrominputstream read schema input stream inputstream input stream exception reads database xml note xml file store database database parsed unavailable reason database deserializedatabasemetadataifpossible deserialize database metadata dbrexmlpath dbre xml path getdbrexmlpath dbre xml path filemanager file manager exists dbrexmlpath dbre xml path filedetails file details filedetails file details filemanager file manager readfile read file dbrexmlpath dbre xml path inputstream input stream inputstream input stream fileinputstream file input stream filedetails file details getfile file databasexmlutils database xml utils readdatabasestructurefrominputstream read database structure input stream inputstream input stream exception printstacktrace print stack trace connection getconnection connection displayaddons display add ons sqlexception sql exception filemanager file manager exists pathresolver path resolver getidentifier identifier path spring config root database properties map connectionproperties connection properties propfileoperations prop file operations getproperties properties path spring config root database properties connectionprovider connection provider getconnection connection connectionproperties connection properties displayaddons display add ons properties connectionproperties connection properties getconnectionpropertiesfromdatanucleusconfiguration connection properties data nucleus configuration connectionprovider connection provider getconnection connection connectionproperties connection properties displayaddons display add ons properties getconnectionpropertiesfromdatanucleusconfiguration connection properties data nucleus configuration persistencexmlpath persistence xml path pathresolver path resolver getidentifier identifier path src resources meta inf persistence xml filemanager file manager exists persistencexmlpath persistence xml path illegalstateexception illegal exception failed find persistencexmlpath persistence xml path filedetails file details filedetails file details filemanager file manager readfile read file persistencexmlpath persistence xml path document document inputstream input stream fileinputstream file input stream filedetails file details getfile file documentbuilder document builder builder xmlutils xml utils getdocumentbuilder document builder builder seterrorhandler set error handler document builder parse exception illegalstateexception illegal exception list element propertyelements property elements xmlutils xml utils findelements find elements persistence persistence unit properties property document getdocumentelement document element notempty empty propertyelements property elements failed find property elements persistencexmlpath persistence xml path properties properties properties element propertyelement property element propertyelements property elements key propertyelement property element getattribute attribute propertyelement property element getattribute attribute datanucleus connectiondrivername connection driver equals key properties database driverclassname driver datanucleus connectionurl connection url equals key properties database url datanucleus connectionusername connection user equals key properties database username datanucleus connectionpassword connection password equals key properties database password properties size required properties ignore elements properties getdbrexmlpath dbre xml path pathresolver path resolver getidentifier identifier path root dbremodelservice dbre model service dbre file