springframework roo shell bufferedinputstream buffered input stream bufferedreader buffered reader file fileinputstream file input stream filenotfoundexception file exception ioexception exception inputstream input stream inputstreamreader input stream reader net url text dateformat format util util properties util set util sortedset sorted set util treeset tree set util jar jarfile jar file util jar manifest util logging level util logging logger util zip zipentry zip entry springframework roo shell event abstractshellstatuspublisher shell status publisher springframework roo shell event shellstatus shell status springframework roo shell event shellstatus shell status status springframework roo support logging handlerutils handler utils springframework roo support util base link shell implementation author ben alex abstractshell shell abstractshellstatuspublisher shell status publisher shell constants slot abstractshell shell getname fields don rename api changed sts completionkeys completion tab shellprompt shell prompt roo instance fields logger logger handlerutils handler utils getlogger logger getclass inblockcomment block comment exitshellrequest exit shell request exitshellrequest exit shell request methods set url findurls find urls resourcename resource gethomeasstring executionstrategy execution strategy getexecutionstrategy execution strategy parser getparser parser clicommand cli command script parses resource file executes commands script clioption cli option key file file locate execute mandatory file resource clioption cli option key linenumbers numbers mandatory specifieddefaultvalue unspecifieddefaultvalue unspecified display numbers executing script linenumbers numbers notnull resource resource parser required started gettime time inputstream input stream inputstream input stream inputstream input stream bufferedinputstream buffered input stream fileinputstream file input stream resource filenotfoundexception file exception trytheclassloaderinstead loader inputstream input stream find resource classloader set url urls findurls find urls resource getname handle search system failure notnull urls unable process classpath bundles locate script handle file simply search notempty empty urls resource resource disk classpath istrue urls size resource classpath unable inputstream input stream urls iterator openstream open stream ioexception exception illegalstateexception illegal exception bufferedreader buffered reader bufferedreader buffered reader inputstreamreader input stream reader inputstream input stream readline read linenumbers numbers logger fine logger fine equals trim success executescriptline execute script success trim startswith starts trim startswith starts success abort script processing wrong illegalstateexception illegal exception script execution aborted ioexception exception illegalstateexception illegal exception inputstream input stream inputstream input stream close ioexception exception close ioexception exception logger fine script required gettime time started execute execute single script overridden classes pre process script lines executescriptline execute script executecommand execute command executecommand execute command command attempted setshellstatus set shell status shellstatus shell status status parsing executionstrategy execution strategy executionstrategy execution strategy getexecutionstrategy execution strategy flashedmessage flashed message executionstrategy execution strategy executionstrategy execution strategy isreadyforcommands ready commands wait thread sleep interruptedexception interrupted exception ignore flashedmessage flashed message flash level info wait loading slot flashedmessage flashed message flashedmessage flashed message flash level info slot parseresult parse result parseresult parse result support simple block comments single pair inblockcomment block comment blockcommentbegin block comment lhs substring lastindexof lhs substring lastindexof blockcommentfinish block comment finish lhs inblockcomment block comment blockcommentfinish block comment finish substring lastindexof support inline comments start valid command options http helloworld fail roo inblockcomment block comment trim startswith starts trim startswith starts support roo convert tab characters whitespace roo replace equals trim setshellstatus set shell status status execution success parseresult parse result getparser parser parse parseresult parse result setshellstatus set shell status status executing object result executionstrategy execution strategy execute parseresult parse result setshellstatus set shell status status execution result processing result result exitshellrequest exit shell request exitshellrequest exit shell request exitshellrequest exit shell request result processmanager process manager chance close threads osgi framework terminated roo executionstrategy execution strategy terminate result iterable object iterable result logger info tostring logger info result tostring logcommandifrequired log command required setshellstatus set shell status status execution success parseresult parse result runtimeexception runtime exception setshellstatus set shell status status execution failed parseresult parse result rely execution strategy log throwable root exceptionutils exception utils extractrootcause extract root logger log level fine root getmessage message logcommandifrequired log command required exception setshellstatus set shell status status user input subclass log execution formed command invoked command completed command returned returned exception note attempted commands formed missing mandatory argument presented command execution attempted cases invoked attempt execute command implementations specially handling script commands indicating command successful implementations behave consistently link abstractshell shell subclasses encouraged simply override link logcommandtooutput log command output override fine tune output logic parsed comments removed successful command successful logcommandifrequired log command required successful startswith starts script logcommandtooutput log command output successful failed logcommandtooutput log command output successful failed subclass write logged command form output frees subclasses needing implement logic link logcommandifrequired log command required implementations invoke link getexitshellrequest exit shell request monitor attempts exit shell release resources output log files processedline processed appended type output excluding character logcommandtooutput log command output processedline processed logger severe processedline processed base implementation link shell setpromptpath set prompt path designed simple shell implementations advanced implementations support ansi codes override set link shellprompt shell prompt variable path set empty formatted special ansi codes setpromptpath set prompt path path equals path path shellprompt shell prompt roo shellprompt shell prompt path roo exitshellrequest exit shell request getexitshellrequest exit shell request exitshellrequest exit shell request clicommand cli command inline comment markers start inlinecomment inline comment clicommand cli command start block comment blockcommentbegin block comment istrue inblockcomment block comment open block comment active inblockcomment block comment clicommand cli command block comment blockcommentfinish block comment finish istrue inblockcomment block comment close block comment opened inblockcomment block comment clicommand cli command system properties shell shell properties props properties properties system getproperties properties sortedset sorted set data treeset tree set object property properties keyset key set object properties property data add property stringbuilder builder stringbuilder builder data append append system getproperty property separator tostring clicommand cli command displays local time dateformat format getdatetimeinstance time instance dateformat format full dateformat format full format clicommand cli command flash test tests message flashing flashcustom flash custom exception flash level fine thread sleep flash level fine thread sleep flash level fine small thread sleep flash level fine downloading xyz thread sleep flash level fine thread sleep flash level fine downloaded xyz thread sleep flash level fine system online thread sleep flash level fine system ready thread sleep flash level fine system farewell thread sleep flash level fine thread sleep flash level fine clicommand cli command version displays shell version version clioption cli option key special version flags extra stringbuilder builder stringbuilder builder jaime equals extra append append system getproperty property separator append append system getproperty property separator append append system getproperty property separator append append system getproperty property separator append append system getproperty property separator append append system getproperty property separator append append system getproperty property separator append loading roo append system getproperty property separator append append system getproperty property separator append append system getproperty property separator append append system getproperty property separator append append system getproperty property separator append append system getproperty property separator append roo append system getproperty property separator append append system getproperty property separator append append system getproperty property separator append append system getproperty property separator append append system getproperty property separator append append system getproperty property separator append append system getproperty property separator append append append versioninfo version info append system getproperty property separator tostring append append system getproperty property separator append append system getproperty property separator append append system getproperty property separator append append system getproperty property separator append append append versioninfo version info append system getproperty property separator append system getproperty property separator tostring versioninfo version info determine bundle version bundleversion bundle version gitcommithash git commit hash jarfile jar file jarfile jar file url classcontainer container abstractshell shell getprotectiondomain protection domain getcodesource code source getlocation location classcontainer container tostring endswith ends jar attempt bundle version version manifest jarfile jar file jarfile jar file file classcontainer container touri uri zipentry zip entry manifestentry manifest entry jarfile jar file getentry entry meta inf manifest manifest manifest manifest jarfile jar file getinputstream input stream manifestentry manifest entry bundleversion bundle version manifest getmainattributes attributes getvalue bundle version gitcommithash git commit hash manifest getmainattributes attributes getvalue git commit hash exception ignoreandmoveon ignore move jarfile jar file jarfile jar file close ioexception exception stringbuilder builder stringbuilder builder bundleversion bundle version append bundleversion bundle version gitcommithash git commit hash gitcommithash git commit hash length length append separate version append rev append gitcommithash git commit hash substring append length append unknown version tostring getshellprompt shell prompt shellprompt shell prompt obtains directory current shell instance note calls link gethomeasstring subclasses provide directory location environment specific strategies path link gethomeasstring exists refers directory directory returned path link gethomeasstring exists refers file exception thrown path link gethomeasstring exist created directory fails exception thrown directory current shell instance guaranteed exist directory file gethome roohome roo gethomeasstring file file roohome roo istrue exists exists isdirectory directory path getabsolutepath absolute path directory exist exists mkdirs istrue exists isdirectory directory path getabsolutepath absolute path directory roo system property correctly simple implementation link flash level simply displays message logger recommended shell implementations override effective approach flash level level message slot notnull level level required flash message notnull message message required flash message hastext text slot slot flash message equals message logger log level message