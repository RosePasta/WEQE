springframework roo addon backup file fileinputstream file input stream filenotfoundexception file exception filenamefilter filename filter ioexception exception text dateformat format text simpledateformat simple format util util logging logger util zip zipentry zip entry util zip zipoutputstream zip output stream springframework roo file monitor event filedetails file details springframework roo metadata metadataservice metadata service springframework roo process manager filemanager file manager springframework roo process manager mutablefile mutable file springframework roo project path springframework roo project pathresolver path resolver springframework roo project projectmetadata project metadata springframework roo support lifecycle scopedevelopment scope development springframework roo support logging handlerutils handler utils springframework roo support util operations backup add author stefan schmidt author ben alex scopedevelopment scope development backupoperations backup operations metadataservice metadata service metadataservice metadata service filemanager file manager filemanager file manager logger logger handlerutils handler utils getlogger logger backupoperations backup operations backupoperations backup operations metadataservice metadata service metadataservice metadata service filemanager file manager filemanager file manager notnull metadataservice metadata service metadata service required notnull filemanager file manager filemanager file manager required metadataservice metadata service metadataservice metadata service filemanager file manager filemanager file manager isbackupavailable backup getpathresolver path resolver backup projectmetadata project metadata projectmetadata project metadata projectmetadata project metadata metadataservice metadata service projectmetadata project metadata getprojectidentifier project identifier notnull projectmetadata project metadata unable project metadata dateformat format simpledateformat simple format yyyy file separatorchar separator windows format legally form filename roo simpledateformat simple format yyyy start system nanotime nano time file projectdirectory project directory file getpathresolver path resolver getidentifier identifier path root mutablefile mutable file file filemanager file manager createfile create file filedetails file details getcanonicalpath canonical path file projectdirectory project directory projectmetadata project metadata getprojectname project format zip zipoutputstream zip output stream zos zipoutputstream zip output stream file getoutputstream output stream zip projectdirectory project directory projectdirectory project directory zos zos close filenotfoundexception file exception logger fine determine project directory ioexception exception logger fine create backup archive milliseconds system nanotime nano time start backup completed milliseconds zip file directory file base zipoutputstream zip output stream zos ioexception exception file files directory listfiles list files filenamefilter filename filter accept file dir don directory target base dir equals base equals target skip existing backup files dir equals base endswith ends zip skip files start startswith starts buffer read files length files isdirectory directory files listfiles list files length zipentry zip entry direntry dir entry zipentry zip entry files getpath path substring base getpath path length system getproperty property file separator zos putnextentry entry direntry dir entry zip files base zos fileinputstream file input stream fileinputstream file input stream files zipentry zip entry entry zipentry zip entry files getpath path substring base getpath path length zos putnextentry entry entry read read buffer zos write buffer read close pathresolver path resolver getpathresolver path resolver projectmetadata project metadata projectmetadata project metadata projectmetadata project metadata metadataservice metadata service projectmetadata project metadata getprojectidentifier project identifier projectmetadata project metadata projectmetadata project metadata getpathresolver path resolver