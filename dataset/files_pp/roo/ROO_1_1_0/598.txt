springframework roo shell jline printwriter print writer stringwriter writer util logging formatter util logging handler util logging level util logging logrecord log record jline ansibuffer ansi buffer jline consolereader console reader springframework roo shell shellpromptaccessor shell prompt accessor springframework roo support util jdk logging link handler emits log messages jline link consolereader console reader author ben alex jlineloghandler log handler handler windows system getproperty property tolowercase windows bright colors getboolean roo bright consolereader console reader reader shellpromptaccessor shell prompt accessor shellpromptaccessor shell prompt accessor threadlocal thread local redrawprohibit redraw prohibit threadlocal thread local lastmessage message includethreadname include thread ansisupported ansi supported userinterfacethreadname user thread jlineloghandler log handler consolereader console reader reader shellpromptaccessor shell prompt accessor shellpromptaccessor shell prompt accessor notnull reader console reader required notnull shellpromptaccessor shell prompt accessor shell prompt accessor required reader reader shellpromptaccessor shell prompt accessor shellpromptaccessor shell prompt accessor userinterfacethreadname user thread thread currentthread current thread getname ansisupported ansi supported reader getterminal terminal isansisupported ansi supported setformatter set formatter formatter format logrecord log record record stringbuffer buffer stringbuffer buffer record getmessage message append record getmessage message append system getproperty property separator record getthrown thrown stringwriter writer stringwriter writer printwriter print writer printwriter print writer record getthrown thrown printstacktrace print stack trace close append tostring exception tostring override flush override close securityexception security exception prohibitredraw prohibit redraw redrawprohibit redraw prohibit set cancelredrawprohibition cancel redraw prohibition redrawprohibit redraw prohibit remove setincludethreadname set include thread include includethreadname include thread include resetmessagetracking reset message tracking lastmessage message roo override publish logrecord log record record avoid repeating message displayed current message roo todisplay display todisplay display record todisplay display equals lastmessage message lastmessage message todisplay display stringbuffer buffer buffer reader getcursorbuffer cursor buffer getbuffer buffer cursor reader getcursorbuffer cursor buffer cursor reader getcursorbuffer cursor buffer length user semi typed debug message separated reader printnewline print newline cancel typed reset appears empty reader getcursorbuffer cursor buffer setbuffer set buffer stringbuffer buffer reader getcursorbuffer cursor buffer cursor ensures displayed redrawing reader setdefaultprompt set prompt reader redrawline redraw restore formatting settings original reader setdefaultprompt set prompt shellpromptaccessor shell prompt accessor getshellprompt shell prompt reader getcursorbuffer cursor buffer setbuffer set buffer buffer reader getcursorbuffer cursor buffer cursor cursor reader printstring print todisplay display prohibitingredraw prohibiting redraw redrawprohibit redraw prohibit prohibitingredraw prohibiting redraw reader redrawline redraw reader flushconsole flush console exception reporterror report error publish log message level severe intvalue todisplay display logrecord log record event stringbuilder builder stringbuilder builder threadname thread eventstring event includethreadname include thread userinterfacethreadname user thread equals thread currentthread current thread getname threadname thread thread currentthread current thread getname build event indent nicely left hand side thread stringbuilder builder lineseparatorandindentingstring separator indenting stringbuilder builder threadname thread length lineseparatorandindentingstring separator indenting append eventstring event getformatter formatter format event replace system getproperty property separator system getproperty property separator lineseparatorandindentingstring separator indenting tostring eventstring event endswith ends lineseparatorandindentingstring separator indenting tostring eventstring event eventstring event substring eventstring event length lineseparatorandindentingstring separator indenting length threadname thread eventstring event getformatter formatter format event ansisupported ansi supported event getlevel level intvalue level severe intvalue append getansibuffer ansi buffer reverse threadname thread red eventstring event event getlevel level intvalue level warning intvalue append getansibuffer ansi buffer reverse threadname thread magenta eventstring event event getlevel level intvalue level info intvalue append getansibuffer ansi buffer reverse threadname thread green eventstring event append getansibuffer ansi buffer reverse threadname thread append eventstring event append threadname thread append eventstring event tostring text brighter requested system property roo bright works issue windows reverse combination jansi lib leaves negative flag set reset explicitly patched ansibuffer ansi buffer ansibuffer ansi buffer getansibuffer ansi buffer esc ansibuffer ansi buffer ansibuffer ansi buffer reverse str windows reverse str append ansicodes ansi codes attrib esc reverse str ansibuffer ansi buffer attrib str code bright colors code code color code add bright code append esc code append str append ansicodes ansi codes attrib attrib str code