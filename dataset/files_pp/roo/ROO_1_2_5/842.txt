springframework roo metadata util arraylist array list util hashmap hash map util hashset hash set util list util map util set commons lang lang validate commons lang lang builder tostringbuilder builder felix scr annotations component felix scr annotations reference felix scr annotations referencecardinality reference cardinality felix scr annotations referencepolicy reference policy felix scr annotations referencestrategy reference strategy felix scr annotations service osgi service component componentcontext component context springframework roo metadata internal abstractmetadatacache metadata cache implementation link metadataservice metadata service implementation thread safe accessed single thread time enforced process manager semantics avoid cost synchronization author ben alex component service reference metadataprovider metadata provider strategy referencestrategy reference strategy event policy referencepolicy reference policy dynamic referenceinterface reference metadataprovider metadata provider cardinality referencecardinality reference cardinality optional multiple defaultmetadataservice metadata service abstractmetadatacache metadata cache metadataservice metadata service reference metadatadependencyregistry metadata dependency registry metadatadependencyregistry metadata dependency registry reference metadatalogger metadata logger metadatalogger metadata logger request control list assist output stacks order requests list activerequests active requests arraylist array list cacheevictions cache evictions cachehits cache hits cachemisses cache misses cacheputs cache puts list verify correct operation logs predictable ordering list keystoretry retry arraylist array list mutex object lock object map metadataprovider metadata provider providermap provider map hashmap hash map metadataprovider metadata provider set metadataprovider metadata provider providers hashset hash set metadataprovider metadata provider recursivegets recursive validgets valid activate componentcontext component context context metadatadependencyregistry metadata dependency registry addnotificationlistener add notification listener bindmetadataprovider bind metadata provider metadataprovider metadata provider lock validate notnull metadata provider required mid getprovidestype type validate istrue metadataidentificationutils metadata identification utils isidentifyingclass identifying mid metadata provider violated contract returning mid validate istrue providermap provider map containskey key mid metadata provider providing metadata providermap provider map mid mid providers add providermap provider map mid deactivate componentcontext component context context metadatadependencyregistry metadata dependency registry removenotificationlistener remove notification listener override evict metadataidentificationstring metadata identification lock clear cache verifies argument valid time evict metadataidentificationstring metadata identification evict downstream dependencies metadata depended evicted metadata downstream metadatadependencyregistry metadata dependency registry getdownstream downstream metadataidentificationstring metadata identification evict instance instance cache metadataidentificationutils metadata identification utils isidentifyinginstance identifying instance downstream evict downstream override evictall evict lock clear cache evictall evict clear caches metadata providers support metadataprovider metadata provider providers metadatacache metadata cache metadatacache metadata cache evictall evict metadataitem metadata item evictandget evict metadataidentificationstring metadata identification getinternal internal metadataidentificationstring metadata identification metadataitem metadata item metadataidentificationstring metadata identification metadataidentificationstring metadata identification metadataitem metadata item metadataidentificationstring metadata identification evictcache evict cache getinternal internal metadataidentificationstring metadata identification evictcache evict cache metadataitem metadata item getinternal internal metadataidentificationstring metadata identification evictcache evict cache cacheretrievalallowed cache retrieval allowed validate istrue metadataidentificationutils metadata identification utils isidentifyinginstance identifying instance metadataidentificationstring metadata identification metadata identification identify metadata instance metadataidentificationstring metadata identification lock validgets valid metadatalogger metadata logger startevent start event cache eviction caller requested evictcache evict cache evict metadataidentificationstring metadata identification metadatalogger metadata logger gettracelevel trace level metadatalogger metadata logger log evicting metadataidentificationstring metadata identification cacheevictions cache evictions cache recursive caller prevented cacheretrievalallowed cache retrieval allowed cache metadataitem metadata item result getfromcache cache metadataidentificationstring metadata identification result cachehits cache hits metadatalogger metadata logger gettracelevel trace level metadatalogger metadata logger log cache hit metadataidentificationstring metadata identification result metadatalogger metadata logger gettracelevel trace level metadatalogger metadata logger log cache metadataidentificationstring metadata identification cachemisses cache misses determine mid requested earlier infinite requests occurring activerequests active requests metadataidentificationstring metadata identification recursivegets recursive keystoretry retry metadataidentificationstring metadata identification metadatalogger metadata logger gettracelevel trace level metadatalogger metadata logger log blocked recursive request metadataidentificationstring metadata identification keystoretry retry add metadataidentificationstring metadata identification destination mdclassid metadataidentificationutils metadata identification utils getmetadataclassid metadata metadataidentificationstring metadata identification metadataprovider metadata provider providermap provider map mdclassid validate notnull metadata provider registered provide metadata identifier metadataidentificationstring metadata identification mdclassid infinite loop management activerequests active requests add metadataidentificationstring metadata identification item metadatalogger metadata logger gettracelevel trace level metadatalogger metadata logger log metadataidentificationstring metadata identification getclass getname metadataitem metadata item result metadatalogger metadata logger starttimer start timer getclass getname result metadataidentificationstring metadata identification metadatalogger metadata logger stoptimer timer item isn evict cache start result evictcache evict cache metadatalogger metadata logger gettracelevel trace level metadatalogger metadata logger log evicting unavailable item metadataidentificationstring metadata identification evict metadataidentificationstring metadata identification cacheevictions cache evictions cache isn result metadatalogger metadata logger gettracelevel trace level metadatalogger metadata logger log caching metadataidentificationstring metadata identification result cacheputs cache puts activerequests active requests remove metadataidentificationstring metadata identification metadatalogger metadata logger gettracelevel trace level metadatalogger metadata logger log returning metadataidentificationstring metadata identification result exception activerequests active requests remove metadataidentificationstring metadata identification illegalstateexception illegal exception block ensure exceptions don prevent metadatalogger metadata logger stopevent event processed requests handle retries recorded activerequests active requests isempty empty list thisretry retry arraylist array list thisretry retry addall add keystoretry retry keystoretry retry clear metadatalogger metadata logger gettracelevel trace level thisretry retry size metadatalogger metadata logger log thisretry retry size retry thisretry retry retrymid retry mid thisretry retry evict prior version cache interim version acceptable discard result purely facilitate updating metadata stored memory disk metadatalogger metadata logger gettracelevel trace level metadatalogger metadata logger log retrying retrymid retry mid getinternal internal retrymid retry mid metadatalogger metadata logger gettracelevel trace level thisretry retry size metadatalogger metadata logger log retry group completed metadataidentificationstring metadata identification metadatalogger metadata logger stopevent event notify upstreamdependency upstream dependency downstreamdependency downstream dependency validate istrue metadataidentificationutils metadata identification utils isvalid valid upstreamdependency upstream dependency upstream dependency invalid metadata identification upstreamdependency upstream dependency validate istrue metadataidentificationutils metadata identification utils isvalid valid downstreamdependency downstream dependency downstream dependency invalid metadata identification downstreamdependency downstream dependency lock destination mdclassid metadataidentificationutils metadata identification utils getmetadataclassid metadata downstreamdependency downstream dependency metadataprovider metadata provider providermap provider map mdclassid provider consume notification contract metadatanotificationlistener metadata notification listener provider handle notification delegate rely provider evict items cache applicable metadatanotificationlistener metadata notification listener notify upstreamdependency upstream dependency downstreamdependency downstream dependency contract ensure evict item recreate destination instance meaningful operation metadataidentificationutils metadata identification utils isidentifyinginstance identifying instance downstreamdependency downstream dependency downstreamdependency downstream dependency contract notify listeners downstream instance changed metadatadependencyregistry metadata dependency registry notifydownstream notify downstream downstreamdependency downstream dependency override metadataitem metadata item metadataitem metadata item metadataitem metadata item cacheputs cache puts override tostring tostringbuilder builder builder tostringbuilder builder builder append validgets valid validgets valid builder append recursivegets recursive recursivegets recursive builder append cacheputs cache puts cacheputs cache puts builder append cachehits cache hits cachehits cache hits builder append cachemisses cache misses cachemisses cache misses builder append cacheevictions cache evictions cacheevictions cache evictions builder append cachecurrentsize cache current size getcachesize cache size builder append cachemaximumsize cache maximum size getmaxcapacity max capacity builder tostring replacefirst replace unbindmetadataprovider unbind metadata provider metadataprovider metadata provider lock mid getprovidestype type providers remove providermap provider map remove mid