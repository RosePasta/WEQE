springframework roo metadata internal util collections util hashmap hash map util hashset hash set util map util set util sortedset sorted set util treeset tree set util concurrent copyonwritearrayset copy write array set util logging logger springframework roo metadata metadatadependencyregistry metadata dependency registry springframework roo metadata metadataidentificationutils metadata identification utils springframework roo metadata metadatanotificationlistener metadata notification listener springframework roo metadata metadataservice metadata service springframework roo metadata metadatatimingstatistic metadata timing statistic springframework roo support lifecycle scopedevelopment scope development springframework roo support logging handlerutils handler utils springframework roo support util implementation link metadatadependencyregistry metadata dependency registry implementation thread safe accessed single thread time enforced process manager semantics avoid cost synchronization author ben alex scopedevelopment scope development defaultmetadatadependencyregistry metadata dependency registry metadatadependencyregistry metadata dependency registry logger logger handlerutils handler utils getlogger logger defaultmetadatadependencyregistry metadata dependency registry trace level notificationnumber notification number started responsibleclass responsible map timings hashmap hash map key upstream dependency list downstream dependencies map set upstreamkeyed upstream keyed hashmap hash map set key downstream dependency list upstream dependencies map set downstreamkeyed downstream keyed hashmap hash map set metadataservice metadata service metadataservice metadata service set metadatanotificationlistener metadata notification listener listeners hashset hash set metadatanotificationlistener metadata notification listener registerdependency register dependency upstreamdependency upstream dependency downstreamdependency downstream dependency istrue isvaliddependency valid dependency upstreamdependency upstream dependency downstreamdependency downstream dependency invalid dependency upstream upstreamdependency upstream dependency downstream downstreamdependency downstream dependency maintain upstream keyed map set downstream upstreamkeyed upstream keyed upstreamdependency upstream dependency downstream downstream hashset hash set upstreamkeyed upstream keyed upstreamdependency upstream dependency downstream downstream add downstreamdependency downstream dependency maintain downstream keyed map set upstream downstreamkeyed downstream keyed downstreamdependency downstream dependency upstream upstream hashset hash set downstreamkeyed downstream keyed downstreamdependency downstream dependency upstream upstream add upstreamdependency upstream dependency deregisterdependencies deregister dependencies downstreamdependency downstream dependency istrue metadataidentificationutils metadata identification utils isvalid valid downstreamdependency downstream dependency downstream dependency invalid metadata identification downstreamdependency downstream dependency acquire delete set upstream downstreamkeyed downstream keyed downstreamdependency downstream dependency upstream set upstreamtodelete upstream delete hashset hash set upstream delete deleteupstream delete upstream upstreamtodelete upstream delete deregisterdependency deregister dependency deleteupstream delete upstream downstreamdependency downstream dependency deregisterdependency deregister dependency upstreamdependency upstream dependency downstreamdependency downstream dependency istrue metadataidentificationutils metadata identification utils isvalid valid upstreamdependency upstream dependency upstream dependency invalid metadata identification upstreamdependency upstream dependency istrue metadataidentificationutils metadata identification utils isvalid valid downstreamdependency downstream dependency downstream dependency invalid metadata identification downstreamdependency downstream dependency maintain upstream keyed map exists set downstream upstreamkeyed upstream keyed upstreamdependency upstream dependency downstream downstream remove downstreamdependency downstream dependency maintain downstream keyed map exists set upstream downstreamkeyed downstream keyed downstreamdependency downstream dependency upstream upstream remove upstreamdependency upstream dependency set getdownstream downstream upstreamdependency upstream dependency istrue metadataidentificationutils metadata identification utils isvalid valid upstreamdependency upstream dependency upstream dependency invalid metadata identification upstreamdependency upstream dependency set downstream upstreamkeyed upstream keyed upstreamdependency upstream dependency downstream hashset hash set collections unmodifiableset unmodifiable set copyonwritearrayset copy write array set downstream set getupstream upstream downstreamdependency downstream dependency istrue metadataidentificationutils metadata identification utils isvalid valid downstreamdependency downstream dependency downstream dependency invalid metadata identification downstreamdependency downstream dependency set upstream downstreamkeyed downstream keyed downstreamdependency downstream dependency upstream hashset hash set collections unmodifiableset unmodifiable set upstream isvaliddependency valid dependency upstreamdependency upstream dependency downstreamdependency downstream dependency istrue metadataidentificationutils metadata identification utils isvalid valid upstreamdependency upstream dependency upstream dependency invalid metadata identification upstreamdependency upstream dependency istrue metadataidentificationutils metadata identification utils isvalid valid downstreamdependency downstream dependency downstream dependency invalid metadata identification downstreamdependency downstream dependency istrue upstreamdependency upstream dependency equals downstreamdependency downstream dependency upstream dependency downstream dependency upstreamdependency upstream dependency simplest outcome relationship exists set downstream upstreamkeyed upstream keyed upstreamdependency upstream dependency downstream downstream downstreamdependency downstream dependency don variable don care downstream dependencies downstream walk upstream dependency dependency parent dependency graph verifying presence proposed downstream dependency build set representing eventual upstream dependency upstream dependency set allupstreams upstreams hashset hash set buildsetofallupstreamdependencies build set upstream dependencies allupstreams upstreams upstreamdependency upstream dependency dependency valid upstreams depend proposed downstream allupstreams upstreams downstreamdependency downstream dependency buildsetofallupstreamdependencies build set upstream dependencies set downstreamdependency downstream dependency set upstreams downstreamkeyed downstream keyed downstreamdependency downstream dependency upstreams upstream upstreams add upstream buildsetofallupstreamdependencies build set upstream dependencies upstream addnotificationlistener add notification listener metadatanotificationlistener metadata notification listener listener notnull listener metadata notification listener required listener metadataservice metadata service istrue metadataservice metadata service register metadatalistener metadata listener metadataservice metadata service metadataservice metadata service listener listeners add listener removenotificationlistener remove notification listener metadatanotificationlistener metadata notification listener listener notnull listener metadata notification listener required listener metadataservice metadata service listener equals metadataservice metadata service metadataservice metadata service listeners remove listener log currentnotification current notification message trace stringbuilder builder stringbuilder builder hex integer tohexstring hex currentnotification current notification replace hex length hex level append append message logger fine tostring stopcounting counting duration existing timings responsibleclass responsible existing existing duration existing existing duration timings responsibleclass responsible existing notifydownstream notify downstream upstreamdependency upstream dependency notificationnumber notification number system currenttimemillis current time millis level duration started stopcounting counting duration started level currentnotification current notification notificationnumber notification number metadataservice metadata service dispatch fine grained instance specific dependencies set notifieddownstreams notified downstreams hashset hash set downstream getdownstream downstream upstreamdependency upstream dependency trace log currentnotification current notification upstreamdependency upstream dependency downstream ensure upstreamdependency upstream dependency downstream that care isvaliddependency valid dependency responsibleclass responsible metadataidentificationutils metadata identification utils getmetadataclass metadata downstream metadataservice metadata service notify upstreamdependency upstream dependency downstream notifieddownstreams notified downstreams add downstream dispatch coarse grained specific dependencies upstream specific handled specific dispatch previous loop metadataidentificationutils metadata identification utils isidentifyingclass identifying upstreamdependency upstream dependency asclass metadataidentificationutils metadata identification utils create metadataidentificationutils metadata identification utils getmetadataclass metadata upstreamdependency upstream dependency downstream getdownstream downstream asclass don notify downstream direct instance specific dependency notified previous loop don notify upstream downstream doesn sense notify event condition instance registered receive specific notifications instance caused event fire notifieddownstreams notified downstreams downstream upstreamdependency upstream dependency equals downstream trace log currentnotification current notification upstreamdependency upstream dependency downstream responsibleclass responsible metadataidentificationutils metadata identification utils getmetadataclass metadata downstream metadataservice metadata service notify upstreamdependency upstream dependency downstream notifieddownstreams notified downstreams dispatch general purpose additional listeners metadatanotificationlistener metadata notification listener listener listeners trace log currentnotification current notification upstreamdependency upstream dependency upstreamdependency upstream dependency listener getclass getsimplename simple responsibleclass responsible listener getclass getname listener notify upstreamdependency upstream dependency level level system currenttimemillis current time millis duration started stopcounting counting duration started settrace set trace trace trace trace sortedset sorted set metadatatimingstatistic metadata timing statistic gettimings timings sortedset sorted set metadatatimingstatistic metadata timing statistic result treeset tree set metadatatimingstatistic metadata timing statistic key timings keyset key set result add standardmetadatatimingstatistic standard metadata timing statistic key timings key result